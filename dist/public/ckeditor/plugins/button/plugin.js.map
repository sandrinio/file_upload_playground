{"version":3,"sources":["../../../../../public/ckeditor/plugins/button/plugin.js"],"names":["template","CKEDITOR","env","gecko","hc","mac","ie","templateArrow","btnArrowTpl","addTemplate","btnTpl","plugins","add","lang","beforeInit","editor","ui","addHandler","UI_BUTTON","button","handler","definition","tools","extend","title","label","click","execCommand","command","_","create","prototype","render","output","updateState","mode","state","modes","modeStates","undefined","TRISTATE_OFF","TRISTATE_DISABLED","readOnly","setState","refresh","id","getNextId","stateName","clickFn","keystroke","shortcut","instance","focus","element","document","getById","execute","attach","keydownFn","addFunction","ev","onkey","dom","event","getKeystroke","focusFn","retVal","onfocus","selLocked","unlockSelection","iOS","on","getCommand","TRISTATE_ON","directional","evt","el","icon","getFirst","pathDir","data","dir","addClass","removeClass","setAttribute","skin","getIconStyle","iconName","iconOffset","getCommandKeystroke","keystrokeToString","common","keyboard","name","test","params","cls","className","ariaDisabled","display","ariaShortcut","keyboardShortcut","aria","titleJs","replace","hasArrow","style","arrowHtml","onRender","removeAttribute","newLabel","selectedLabel","setText","getState","toFeature","feature","allowedContent","requiredContent","addButton"],"mappings":";;AAAC;;;;;AAKD,CAAE,YAAW;AACZ,KAAIA,WAAW,iBACd,iEADc,IAEZC,SAASC,GAAT,CAAaC,KAAb,IAAsB,CAACF,SAASC,GAAT,CAAaE,EAApC,GAAyC,EAAzC,GAA8C,wCAFlC,IAGd,kBAHc,GAId,gBAJc,GAKd,mBALc,GAMd,gBANc,GAOd,+BAPc,GAQd,sCARc,GASd,6BATc,GAUd,iCAVD;;AAYA;AACA;AACA;AACA,KAAKH,SAASC,GAAT,CAAaC,KAAb,IAAsBF,SAASC,GAAT,CAAaG,GAAxC,EACCL,YAAY,6BAAZ;;AAED;AACA;AACA,KAAKC,SAASC,GAAT,CAAaC,KAAlB,EACCH,YAAY,oDAAZ;;AAEDA,aAAY,wEACX,kEADW,IAETC,SAASC,GAAT,CAAaI,EAAb,GAAkB,mCAAlB,GAAwD,SAF/C,IAE6D;AACvE,gEAHU,GAIX,2EAJD;;AAOAN,aAAY,mBACX,4GADW,GAEX,gGAFW,GAGX,aAHW,GAIX,MAJD;;AAMA,KAAIO,gBAAgB;AACnB;AACCN,UAASC,GAAT,CAAaE,EAAb,GAAkB,SAAlB,GAA8B,EAFZ,IAGnB,SAHD;;AAKA,KAAII,cAAcP,SAASQ,WAAT,CAAsB,aAAtB,EAAqCF,aAArC,CAAlB;AAAA,KACCG,SAAST,SAASQ,WAAT,CAAsB,QAAtB,EAAgCT,QAAhC,CADV;;AAGAC,UAASU,OAAT,CAAiBC,GAAjB,CAAsB,QAAtB,EAAgC;AAC/BC,QAAM,sKADyB,EAC+I;AAC9KC,cAAY,oBAAUC,MAAV,EAAmB;AAC9BA,UAAOC,EAAP,CAAUC,UAAV,CAAsBhB,SAASiB,SAA/B,EAA0CjB,SAASe,EAAT,CAAYG,MAAZ,CAAmBC,OAA7D;AACA;AAJ8B,EAAhC;;AAOA;;;;;;;AAOAnB,UAASiB,SAAT,GAAqB,QAArB;;AAEA;;;;;;;;AAQAjB,UAASe,EAAT,CAAYG,MAAZ,GAAqB,UAAUE,UAAV,EAAuB;AAC3CpB,WAASqB,KAAT,CAAeC,MAAf,CAAuB,IAAvB,EAA6BF,UAA7B;AACA;AACA;AACCG,UAAOH,WAAWI,KADnB;AAECC,UAAOL,WAAWK,KAAX,IACP,UAAUX,MAAV,EAAmB;AAClBA,WAAOY,WAAP,CAAoBN,WAAWO,OAA/B;AACA;AALF,GAFA;;AAUA,OAAKC,CAAL,GAAS,EAAT;AACA,EAZD;;AAcA;;;;;;;AAOA5B,UAASe,EAAT,CAAYG,MAAZ,CAAmBC,OAAnB,GAA6B;AAC5B;;;;;;;AAOAU,UAAQ,gBAAUT,UAAV,EAAuB;AAC9B,UAAO,IAAIpB,SAASe,EAAT,CAAYG,MAAhB,CAAwBE,UAAxB,CAAP;AACA;AAV2B,EAA7B;;AAaA;AACApB,UAASe,EAAT,CAAYG,MAAZ,CAAmBY,SAAnB,GAA+B;AAC9B;;;;;;;;AAQAC,UAAQ,gBAAUjB,MAAV,EAAkBkB,MAAlB,EAA2B;AAClC,YAASC,WAAT,GAAuB;AACtB;AACA,QAAIC,OAAOpB,OAAOoB,IAAlB;;AAEA,QAAKA,IAAL,EAAY;AACX;AACA,SAAIC,QAAQ,KAAKC,KAAL,CAAYF,IAAZ,IAAqBG,WAAYH,IAAZ,MAAuBI,SAAvB,GAAmCD,WAAYH,IAAZ,CAAnC,GAAwDlC,SAASuC,YAAtF,GAAqGvC,SAASwC,iBAA1H;;AAEAL,aAAQrB,OAAO2B,QAAP,IAAmB,CAAC,KAAKA,QAAzB,GAAoCzC,SAASwC,iBAA7C,GAAiEL,KAAzE;;AAEA,UAAKO,QAAL,CAAeP,KAAf;;AAEA;AACA,SAAK,KAAKQ,OAAV,EACC,KAAKA,OAAL;AACD;AACD;;AAED,OAAI1C,MAAMD,SAASC,GAAnB;AAAA,OACC2C,KAAK,KAAKhB,CAAL,CAAOgB,EAAP,GAAY5C,SAASqB,KAAT,CAAewB,SAAf,EADlB;AAAA,OAECC,YAAY,EAFb;AAAA,OAGCnB,UAAU,KAAKA,OAHhB;;AAIC;AACAoB,UALD;AAAA,OAMCC,SAND;AAAA,OAOCC,QAPD;;AASA,QAAKrB,CAAL,CAAOd,MAAP,GAAgBA,MAAhB;;AAEA,OAAIoC,WAAW;AACdN,QAAIA,EADU;AAEd1B,YAAQ,IAFM;AAGdJ,YAAQA,MAHM;AAIdqC,WAAO,iBAAW;AACjB,SAAIC,UAAUpD,SAASqD,QAAT,CAAkBC,OAAlB,CAA2BV,EAA3B,CAAd;AACAQ,aAAQD,KAAR;AACA,KAPa;AAQdI,aAAS,mBAAW;AACnB,UAAKrC,MAAL,CAAYO,KAAZ,CAAmBX,MAAnB;AACA,KAVa;AAWd0C,YAAQ,gBAAU1C,MAAV,EAAmB;AAC1B,UAAKI,MAAL,CAAYsC,MAAZ,CAAoB1C,MAApB;AACA;AAba,IAAf;;AAgBA,OAAI2C,YAAYzD,SAASqB,KAAT,CAAeqC,WAAf,CAA4B,UAAUC,EAAV,EAAe;AAC1D,QAAKT,SAASU,KAAd,EAAsB;AACrBD,UAAK,IAAI3D,SAAS6D,GAAT,CAAaC,KAAjB,CAAwBH,EAAxB,CAAL;AACA,YAAST,SAASU,KAAT,CAAgBV,QAAhB,EAA0BS,GAAGI,YAAH,EAA1B,MAAkD,KAA3D;AACA;AACD,IALe,CAAhB;;AAOA,OAAIC,UAAUhE,SAASqB,KAAT,CAAeqC,WAAf,CAA4B,UAAUC,EAAV,EAAe;AACxD,QAAIM,MAAJ;;AAEA,QAAKf,SAASgB,OAAd,EACCD,SAAWf,SAASgB,OAAT,CAAkBhB,QAAlB,EAA4B,IAAIlD,SAAS6D,GAAT,CAAaC,KAAjB,CAAwBH,EAAxB,CAA5B,MAA+D,KAA1E;;AAED,WAAOM,MAAP;AACA,IAPa,CAAd;;AASA,OAAIE,YAAY,CAAhB;;AAEAjB,YAASH,OAAT,GAAmBA,UAAU/C,SAASqB,KAAT,CAAeqC,WAAf,CAA4B,YAAW;;AAEnE;AACA,QAAKS,SAAL,EAAiB;AAChBrD,YAAOsD,eAAP,CAAwB,CAAxB;AACAD,iBAAY,CAAZ;AACA;AACDjB,aAASK,OAAT;;AAEA;AACA,QAAKtD,IAAIoE,GAAT,EAAe;AACdvD,YAAOqC,KAAP;AACA;AACD,IAb4B,CAA7B;;AAgBA;AACA,OAAK,KAAKf,KAAV,EAAkB;AACjB,QAAIC,aAAa,EAAjB;;AAEAvB,WAAOwD,EAAP,CAAW,kBAAX,EAA+B,YAAW;AACzC,SAAKxD,OAAOoB,IAAP,IAAe,KAAKN,CAAL,CAAOO,KAAP,IAAgBnC,SAASwC,iBAA7C,EACCH,WAAYvB,OAAOoB,IAAnB,IAA4B,KAAKN,CAAL,CAAOO,KAAnC;AACD,KAHD,EAGG,IAHH;;AAKA;AACArB,WAAOwD,EAAP,CAAW,oBAAX,EAAiCrC,WAAjC,EAA8C,IAA9C;AACAnB,WAAOwD,EAAP,CAAW,MAAX,EAAmBrC,WAAnB,EAAgC,IAAhC;AACA;AACA,KAAC,KAAKQ,QAAN,IAAkB3B,OAAOwD,EAAP,CAAW,UAAX,EAAuBrC,WAAvB,EAAoC,IAApC,CAAlB;AAEA,IAdD,MAcO,IAAKN,OAAL,EAAe;AACrB;AACAA,cAAUb,OAAOyD,UAAP,CAAmB5C,OAAnB,CAAV;;AAEA,QAAKA,OAAL,EAAe;AACdA,aAAQ2C,EAAR,CAAY,OAAZ,EAAqB,YAAW;AAC/B,WAAK5B,QAAL,CAAef,QAAQQ,KAAvB;AACA,MAFD,EAEG,IAFH;;AAIAW,kBAAenB,QAAQQ,KAAR,IAAiBnC,SAASwE,WAA1B,GAAwC,IAAxC,GAA+C7C,QAAQQ,KAAR,IAAiBnC,SAASwC,iBAA1B,GAA8C,UAA9C,GAA2D,KAAzH;AACA;AACD;;AAED;AACA,OAAK,KAAKiC,WAAV,EAAwB;AACvB3D,WAAOwD,EAAP,CAAW,mBAAX,EAAgC,UAAUI,GAAV,EAAgB;AAC/C,SAAIC,KAAK3E,SAASqD,QAAT,CAAkBC,OAAlB,CAA2B,KAAK1B,CAAL,CAAOgB,EAAlC,CAAT;AAAA,SACCgC,OAAOD,GAAGE,QAAH,EADR;;AAGA,SAAIC,UAAUJ,IAAIK,IAAlB;;AAEA;AACA,SAAKD,WAAYhE,OAAOF,IAAP,CAAYoE,GAA7B,EACCL,GAAGM,QAAH,CAAa,SAASH,OAAtB,EADD,KAGCH,GAAGO,WAAH,CAAgB,SAAhB,EAA4BA,WAA5B,CAAyC,SAAzC;;AAED;AACAN,UAAKO,YAAL,CAAmB,OAAnB,EAA4BnF,SAASoF,IAAT,CAAcC,YAAd,CAA4BC,QAA5B,EAAsCR,WAAW,KAAjD,EAAwD,KAAKF,IAA7D,EAAmE,KAAKW,UAAxE,CAA5B;AACA,KAdD,EAcG,IAdH;AAeA;;AAED,OAAK,CAAC5D,OAAN,EAAgB;AACfmB,iBAAa,KAAb;AACA,IAFD,MAEO;AACNE,gBAAYlC,OAAO0E,mBAAP,CAA4B7D,OAA5B,CAAZ;;AAEA,QAAKqB,SAAL,EAAiB;AAChBC,gBAAWjD,SAASqB,KAAT,CAAeoE,iBAAf,CAAkC3E,OAAOF,IAAP,CAAY8E,MAAZ,CAAmBC,QAArD,EAA+D3C,SAA/D,CAAX;AACA;AACD;;AAED,OAAI4C,OAAO,KAAKA,IAAL,IAAa,KAAKjE,OAA7B;AAAA,OACC2D,WAAWM,IADZ;;AAGA;AACA,OAAK,KAAKhB,IAAL,IAAa,CAAG,IAAF,CAASiB,IAAT,CAAe,KAAKjB,IAApB,CAAnB,EAAgD;AAC/CU,eAAW,KAAKV,IAAhB;AACA,SAAKA,IAAL,GAAY,IAAZ;AACA;;AAED,OAAIkB,SAAS;AACZlD,QAAIA,EADQ;AAEZgD,UAAMA,IAFM;AAGZN,cAAUA,QAHE;AAIZ9D,WAAO,KAAKA,KAJA;AAKZuE,SAAK,KAAKC,SAAL,IAAkB,EALX;AAMZ7D,WAAOW,SANK;AAOZmD,kBAAcnD,aAAa,UAAb,GAA0B,MAA1B,GAAmC,OAPrC;AAQZvB,WAAO,KAAKA,KAAL,IAAe0B,WAAW,OAAOA,SAASiD,OAAhB,GAA0B,GAArC,GAA2C,EAA1D,CARK;AASZC,kBAAclD,WAAWnC,OAAOF,IAAP,CAAY8E,MAAZ,CAAmBU,gBAAnB,GAAsC,GAAtC,GAA4CnD,SAASoD,IAAhE,GAAuE,EATzE;AAUZC,aAASrG,IAAIC,KAAJ,IAAa,CAACD,IAAIE,EAAlB,GAAuB,EAAvB,GAA4B,CAAE,KAAKoB,KAAL,IAAc,EAAhB,EAAqBgF,OAArB,CAA8B,GAA9B,EAAmC,EAAnC,CAVzB;AAWZC,cAAU,KAAKA,QAAL,GAAgB,MAAhB,GAAyB,OAXvB;AAYZ/C,eAAWA,SAZC;AAaZO,aAASA,OAbG;AAcZjB,aAASA,OAdG;AAeZ0D,WAAOzG,SAASoF,IAAT,CAAcC,YAAd,CAA4BC,QAA5B,EAAwCxE,OAAOF,IAAP,CAAYoE,GAAZ,IAAmB,KAA3D,EAAoE,KAAKJ,IAAzE,EAA+E,KAAKW,UAApF,CAfK;AAgBZmB,eAAW,KAAKF,QAAL,GAAgBjG,YAAYyB,MAAZ,EAAhB,GAAuC;AAhBtC,IAAb;;AAmBAvB,UAAOuB,MAAP,CAAe8D,MAAf,EAAuB9D,MAAvB;;AAEA,OAAK,KAAK2E,QAAV,EACC,KAAKA,QAAL;;AAED,UAAOzD,QAAP;AACA,GApL6B;;AAsL9B;;;;;;AAMAR,YAAU,kBAAUP,KAAV,EAAkB;AAC3B,OAAK,KAAKP,CAAL,CAAOO,KAAP,IAAgBA,KAArB,EACC,OAAO,KAAP;;AAED,QAAKP,CAAL,CAAOO,KAAP,GAAeA,KAAf;;AAEA,OAAIiB,UAAUpD,SAASqD,QAAT,CAAkBC,OAAlB,CAA2B,KAAK1B,CAAL,CAAOgB,EAAlC,CAAd;;AAEA,OAAKQ,OAAL,EAAe;AACdA,YAAQV,QAAR,CAAkBP,KAAlB,EAAyB,YAAzB;;AAEAA,aAASnC,SAASwC,iBAAlB,GACCY,QAAQ+B,YAAR,CAAsB,eAAtB,EAAuC,IAAvC,CADD,GAEC/B,QAAQwD,eAAR,CAAyB,eAAzB,CAFD;;AAIA,QAAK,CAAC,KAAKJ,QAAX,EAAsB;AACrB;AACArE,cAASnC,SAASwE,WAAlB,GACCpB,QAAQ+B,YAAR,CAAsB,cAAtB,EAAsC,IAAtC,CADD,GAEC/B,QAAQwD,eAAR,CAAyB,cAAzB,CAFD;AAGA,KALD,MAKO;AACN,SAAIC,WAAW1E,SAASnC,SAASwE,WAAlB,GACd,KAAK5C,CAAL,CAAOd,MAAP,CAAcF,IAAd,CAAmBM,MAAnB,CAA0B4F,aAA1B,CAAwCP,OAAxC,CAAiD,KAAjD,EAAwD,KAAK/E,KAA7D,CADc,GACyD,KAAKA,KAD7E;AAEAxB,cAASqD,QAAT,CAAkBC,OAAlB,CAA2B,KAAK1B,CAAL,CAAOgB,EAAP,GAAY,QAAvC,EAAkDmE,OAAlD,CAA2DF,QAA3D;AACA;;AAED,WAAO,IAAP;AACA,IAnBD,MAmBO;AACN,WAAO,KAAP;AACA;AACD,GA1N6B;;AA4N9B;;;;;;AAMAG,YAAU,oBAAW;AACpB,UAAO,KAAKpF,CAAL,CAAOO,KAAd;AACA,GApO6B;;AAsO9B;;;;;;;;;;;;;;AAcA8E,aAAW,mBAAUnG,MAAV,EAAmB;AAC7B,OAAK,KAAKc,CAAL,CAAOsF,OAAZ,EACC,OAAO,KAAKtF,CAAL,CAAOsF,OAAd;;AAED,OAAIA,UAAU,IAAd;;AAEA;AACA,OAAK,CAAC,KAAKC,cAAN,IAAwB,CAAC,KAAKC,eAA9B,IAAiD,KAAKzF,OAA3D,EACCuF,UAAUpG,OAAOyD,UAAP,CAAmB,KAAK5C,OAAxB,KAAqCuF,OAA/C;;AAED,UAAO,KAAKtF,CAAL,CAAOsF,OAAP,GAAiBA,OAAxB;AACA;AA/P6B,EAA/B;;AAkQA;;;;;;;;;;;;;;;;;AAiBAlH,UAASe,EAAT,CAAYe,SAAZ,CAAsBuF,SAAtB,GAAkC,UAAUzB,IAAV,EAAgBxE,UAAhB,EAA6B;AAC9D,OAAKT,GAAL,CAAUiF,IAAV,EAAgB5F,SAASiB,SAAzB,EAAoCG,UAApC;AACA,EAFD;AAIA,CA/XD","file":"plugin.js","sourcesContent":["ï»¿/**\n * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or http://ckeditor.com/license\n */\n\n( function() {\n\tvar template = '<a id=\"{id}\"' +\n\t\t' class=\"cke_button cke_button__{name} cke_button_{state} {cls}\"' +\n\t\t( CKEDITOR.env.gecko && !CKEDITOR.env.hc ? '' : ' href=\"javascript:void(\\'{titleJs}\\')\"' ) +\n\t\t' title=\"{title}\"' +\n\t\t' tabindex=\"-1\"' +\n\t\t' hidefocus=\"true\"' +\n\t\t' role=\"button\"' +\n\t\t' aria-labelledby=\"{id}_label\"' +\n\t\t' aria-describedby=\"{id}_description\"' +\n\t\t' aria-haspopup=\"{hasArrow}\"' +\n\t\t' aria-disabled=\"{ariaDisabled}\"';\n\n\t// Some browsers don't cancel key events in the keydown but in the\n\t// keypress.\n\t// TODO: Check if really needed.\n\tif ( CKEDITOR.env.gecko && CKEDITOR.env.mac )\n\t\ttemplate += ' onkeypress=\"return false;\"';\n\n\t// With Firefox, we need to force the button to redraw, otherwise it\n\t// will remain in the focus state.\n\tif ( CKEDITOR.env.gecko )\n\t\ttemplate += ' onblur=\"this.style.cssText = this.style.cssText;\"';\n\n\ttemplate += ' onkeydown=\"return CKEDITOR.tools.callFunction({keydownFn},event);\"' +\n\t\t' onfocus=\"return CKEDITOR.tools.callFunction({focusFn},event);\" ' +\n\t\t( CKEDITOR.env.ie ? 'onclick=\"return false;\" onmouseup' : 'onclick' ) + // http://dev.ckeditor.com/ticket/188\n\t\t\t'=\"CKEDITOR.tools.callFunction({clickFn},this);return false;\">' +\n\t\t'<span class=\"cke_button_icon cke_button__{iconName}_icon\" style=\"{style}\"';\n\n\n\ttemplate += '>&nbsp;</span>' +\n\t\t'<span id=\"{id}_label\" class=\"cke_button_label cke_button__{name}_label\" aria-hidden=\"false\">{label}</span>' +\n\t\t'<span id=\"{id}_description\" class=\"cke_button_label\" aria-hidden=\"false\">{ariaShortcut}</span>' +\n\t\t'{arrowHtml}' +\n\t\t'</a>';\n\n\tvar templateArrow = '<span class=\"cke_button_arrow\">' +\n\t\t// BLACK DOWN-POINTING TRIANGLE\n\t( CKEDITOR.env.hc ? '&#9660;' : '' ) +\n\t\t'</span>';\n\n\tvar btnArrowTpl = CKEDITOR.addTemplate( 'buttonArrow', templateArrow ),\n\t\tbtnTpl = CKEDITOR.addTemplate( 'button', template );\n\n\tCKEDITOR.plugins.add( 'button', {\n\t\tlang: 'af,ar,az,bg,ca,cs,da,de,de-ch,el,en,en-gb,eo,es,es-mx,eu,fa,fi,fr,gl,he,hr,hu,id,it,ja,km,ko,ku,lt,nb,nl,no,oc,pl,pt,pt-br,ro,ru,sk,sl,sq,sv,tr,tt,ug,uk,vi,zh,zh-cn', // %REMOVE_LINE_CORE%\n\t\tbeforeInit: function( editor ) {\n\t\t\teditor.ui.addHandler( CKEDITOR.UI_BUTTON, CKEDITOR.ui.button.handler );\n\t\t}\n\t} );\n\n\t/**\n\t * Button UI element.\n\t *\n\t * @readonly\n\t * @property {String} [='button']\n\t * @member CKEDITOR\n\t */\n\tCKEDITOR.UI_BUTTON = 'button';\n\n\t/**\n\t * Represents a button UI element. This class should not be called directly. To\n\t * create new buttons use {@link CKEDITOR.ui#addButton} instead.\n\t *\n\t * @class\n\t * @constructor Creates a button class instance.\n\t * @param {Object} definition The button definition.\n\t */\n\tCKEDITOR.ui.button = function( definition ) {\n\t\tCKEDITOR.tools.extend( this, definition,\n\t\t// Set defaults.\n\t\t{\n\t\t\ttitle: definition.label,\n\t\t\tclick: definition.click ||\n\t\t\tfunction( editor ) {\n\t\t\t\teditor.execCommand( definition.command );\n\t\t\t}\n\t\t} );\n\n\t\tthis._ = {};\n\t};\n\n\t/**\n\t * Represents the button handler object.\n\t *\n\t * @class\n\t * @singleton\n\t * @extends CKEDITOR.ui.handlerDefinition\n\t */\n\tCKEDITOR.ui.button.handler = {\n\t\t/**\n\t\t * Transforms a button definition in a {@link CKEDITOR.ui.button} instance.\n\t\t *\n\t\t * @member CKEDITOR.ui.button.handler\n\t\t * @param {Object} definition\n\t\t * @returns {CKEDITOR.ui.button}\n\t\t */\n\t\tcreate: function( definition ) {\n\t\t\treturn new CKEDITOR.ui.button( definition );\n\t\t}\n\t};\n\n\t/** @class CKEDITOR.ui.button */\n\tCKEDITOR.ui.button.prototype = {\n\t\t/**\n\t\t * Renders the button.\n\t\t *\n\t\t * @param {CKEDITOR.editor} editor The editor instance which this button is\n\t\t * to be used by.\n\t\t * @param {Array} output The output array to which the HTML code related to\n\t\t * this button should be appended.\n\t\t */\n\t\trender: function( editor, output ) {\n\t\t\tfunction updateState() {\n\t\t\t\t// \"this\" is a CKEDITOR.ui.button instance.\n\t\t\t\tvar mode = editor.mode;\n\n\t\t\t\tif ( mode ) {\n\t\t\t\t\t// Restore saved button state.\n\t\t\t\t\tvar state = this.modes[ mode ] ? modeStates[ mode ] !== undefined ? modeStates[ mode ] : CKEDITOR.TRISTATE_OFF : CKEDITOR.TRISTATE_DISABLED;\n\n\t\t\t\t\tstate = editor.readOnly && !this.readOnly ? CKEDITOR.TRISTATE_DISABLED : state;\n\n\t\t\t\t\tthis.setState( state );\n\n\t\t\t\t\t// Let plugin to disable button.\n\t\t\t\t\tif ( this.refresh )\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar env = CKEDITOR.env,\n\t\t\t\tid = this._.id = CKEDITOR.tools.getNextId(),\n\t\t\t\tstateName = '',\n\t\t\t\tcommand = this.command,\n\t\t\t\t// Get the command name.\n\t\t\t\tclickFn,\n\t\t\t\tkeystroke,\n\t\t\t\tshortcut;\n\n\t\t\tthis._.editor = editor;\n\n\t\t\tvar instance = {\n\t\t\t\tid: id,\n\t\t\t\tbutton: this,\n\t\t\t\teditor: editor,\n\t\t\t\tfocus: function() {\n\t\t\t\t\tvar element = CKEDITOR.document.getById( id );\n\t\t\t\t\telement.focus();\n\t\t\t\t},\n\t\t\t\texecute: function() {\n\t\t\t\t\tthis.button.click( editor );\n\t\t\t\t},\n\t\t\t\tattach: function( editor ) {\n\t\t\t\t\tthis.button.attach( editor );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar keydownFn = CKEDITOR.tools.addFunction( function( ev ) {\n\t\t\t\tif ( instance.onkey ) {\n\t\t\t\t\tev = new CKEDITOR.dom.event( ev );\n\t\t\t\t\treturn ( instance.onkey( instance, ev.getKeystroke() ) !== false );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tvar focusFn = CKEDITOR.tools.addFunction( function( ev ) {\n\t\t\t\tvar retVal;\n\n\t\t\t\tif ( instance.onfocus )\n\t\t\t\t\tretVal = ( instance.onfocus( instance, new CKEDITOR.dom.event( ev ) ) !== false );\n\n\t\t\t\treturn retVal;\n\t\t\t} );\n\n\t\t\tvar selLocked = 0;\n\n\t\t\tinstance.clickFn = clickFn = CKEDITOR.tools.addFunction( function() {\n\n\t\t\t\t// Restore locked selection in Opera.\n\t\t\t\tif ( selLocked ) {\n\t\t\t\t\teditor.unlockSelection( 1 );\n\t\t\t\t\tselLocked = 0;\n\t\t\t\t}\n\t\t\t\tinstance.execute();\n\n\t\t\t\t// Fixed iOS focus issue when your press disabled button (http://dev.ckeditor.com/ticket/12381).\n\t\t\t\tif ( env.iOS ) {\n\t\t\t\t\teditor.focus();\n\t\t\t\t}\n\t\t\t} );\n\n\n\t\t\t// Indicate a mode sensitive button.\n\t\t\tif ( this.modes ) {\n\t\t\t\tvar modeStates = {};\n\n\t\t\t\teditor.on( 'beforeModeUnload', function() {\n\t\t\t\t\tif ( editor.mode && this._.state != CKEDITOR.TRISTATE_DISABLED )\n\t\t\t\t\t\tmodeStates[ editor.mode ] = this._.state;\n\t\t\t\t}, this );\n\n\t\t\t\t// Update status when activeFilter, mode or readOnly changes.\n\t\t\t\teditor.on( 'activeFilterChange', updateState, this );\n\t\t\t\teditor.on( 'mode', updateState, this );\n\t\t\t\t// If this button is sensitive to readOnly state, update it accordingly.\n\t\t\t\t!this.readOnly && editor.on( 'readOnly', updateState, this );\n\n\t\t\t} else if ( command ) {\n\t\t\t\t// Get the command instance.\n\t\t\t\tcommand = editor.getCommand( command );\n\n\t\t\t\tif ( command ) {\n\t\t\t\t\tcommand.on( 'state', function() {\n\t\t\t\t\t\tthis.setState( command.state );\n\t\t\t\t\t}, this );\n\n\t\t\t\t\tstateName += ( command.state == CKEDITOR.TRISTATE_ON ? 'on' : command.state == CKEDITOR.TRISTATE_DISABLED ? 'disabled' : 'off' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For button that has text-direction awareness on selection path.\n\t\t\tif ( this.directional ) {\n\t\t\t\teditor.on( 'contentDirChanged', function( evt ) {\n\t\t\t\t\tvar el = CKEDITOR.document.getById( this._.id ),\n\t\t\t\t\t\ticon = el.getFirst();\n\n\t\t\t\t\tvar pathDir = evt.data;\n\n\t\t\t\t\t// Make a minor direction change to become style-able for the skin icon.\n\t\t\t\t\tif ( pathDir !=  editor.lang.dir )\n\t\t\t\t\t\tel.addClass( 'cke_' + pathDir );\n\t\t\t\t\telse\n\t\t\t\t\t\tel.removeClass( 'cke_ltr' ).removeClass( 'cke_rtl' );\n\n\t\t\t\t\t// Inline style update for the plugin icon.\n\t\t\t\t\ticon.setAttribute( 'style', CKEDITOR.skin.getIconStyle( iconName, pathDir == 'rtl', this.icon, this.iconOffset ) );\n\t\t\t\t}, this );\n\t\t\t}\n\n\t\t\tif ( !command ) {\n\t\t\t\tstateName += 'off';\n\t\t\t} else {\n\t\t\t\tkeystroke = editor.getCommandKeystroke( command );\n\n\t\t\t\tif ( keystroke ) {\n\t\t\t\t\tshortcut = CKEDITOR.tools.keystrokeToString( editor.lang.common.keyboard, keystroke );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar name = this.name || this.command,\n\t\t\t\ticonName = name;\n\n\t\t\t// Check if we're pointing to an icon defined by another command. (http://dev.ckeditor.com/ticket/9555)\n\t\t\tif ( this.icon && !( /\\./ ).test( this.icon ) ) {\n\t\t\t\ticonName = this.icon;\n\t\t\t\tthis.icon = null;\n\t\t\t}\n\n\t\t\tvar params = {\n\t\t\t\tid: id,\n\t\t\t\tname: name,\n\t\t\t\ticonName: iconName,\n\t\t\t\tlabel: this.label,\n\t\t\t\tcls: this.className || '',\n\t\t\t\tstate: stateName,\n\t\t\t\tariaDisabled: stateName == 'disabled' ? 'true' : 'false',\n\t\t\t\ttitle: this.title + ( shortcut ? ' (' + shortcut.display + ')' : '' ),\n\t\t\t\tariaShortcut: shortcut ? editor.lang.common.keyboardShortcut + ' ' + shortcut.aria : '',\n\t\t\t\ttitleJs: env.gecko && !env.hc ? '' : ( this.title || '' ).replace( \"'\", '' ),\n\t\t\t\thasArrow: this.hasArrow ? 'true' : 'false',\n\t\t\t\tkeydownFn: keydownFn,\n\t\t\t\tfocusFn: focusFn,\n\t\t\t\tclickFn: clickFn,\n\t\t\t\tstyle: CKEDITOR.skin.getIconStyle( iconName, ( editor.lang.dir == 'rtl' ), this.icon, this.iconOffset ),\n\t\t\t\tarrowHtml: this.hasArrow ? btnArrowTpl.output() : ''\n\t\t\t};\n\n\t\t\tbtnTpl.output( params, output );\n\n\t\t\tif ( this.onRender )\n\t\t\t\tthis.onRender();\n\n\t\t\treturn instance;\n\t\t},\n\n\t\t/**\n\t\t * Sets the button state.\n\t\t *\n\t\t * @param {Number} state Indicates the button state. One of {@link CKEDITOR#TRISTATE_ON},\n\t\t * {@link CKEDITOR#TRISTATE_OFF}, or {@link CKEDITOR#TRISTATE_DISABLED}.\n\t\t */\n\t\tsetState: function( state ) {\n\t\t\tif ( this._.state == state )\n\t\t\t\treturn false;\n\n\t\t\tthis._.state = state;\n\n\t\t\tvar element = CKEDITOR.document.getById( this._.id );\n\n\t\t\tif ( element ) {\n\t\t\t\telement.setState( state, 'cke_button' );\n\n\t\t\t\tstate == CKEDITOR.TRISTATE_DISABLED ?\n\t\t\t\t\telement.setAttribute( 'aria-disabled', true ) :\n\t\t\t\t\telement.removeAttribute( 'aria-disabled' );\n\n\t\t\t\tif ( !this.hasArrow ) {\n\t\t\t\t\t// Note: aria-pressed attribute should not be added to menuButton instances. (http://dev.ckeditor.com/ticket/11331)\n\t\t\t\t\tstate == CKEDITOR.TRISTATE_ON ?\n\t\t\t\t\t\telement.setAttribute( 'aria-pressed', true ) :\n\t\t\t\t\t\telement.removeAttribute( 'aria-pressed' );\n\t\t\t\t} else {\n\t\t\t\t\tvar newLabel = state == CKEDITOR.TRISTATE_ON ?\n\t\t\t\t\t\tthis._.editor.lang.button.selectedLabel.replace( /%1/g, this.label ) : this.label;\n\t\t\t\t\tCKEDITOR.document.getById( this._.id + '_label' ).setText( newLabel );\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets the button state.\n\t\t *\n\t\t * @returns {Number} The button state. One of {@link CKEDITOR#TRISTATE_ON},\n\t\t * {@link CKEDITOR#TRISTATE_OFF}, or {@link CKEDITOR#TRISTATE_DISABLED}.\n\t\t */\n\t\tgetState: function() {\n\t\t\treturn this._.state;\n\t\t},\n\n\t\t/**\n\t\t * Returns this button's {@link CKEDITOR.feature} instance.\n\t\t *\n\t\t * It may be this button instance if it has at least one of\n\t\t * `allowedContent` and `requiredContent` properties. Otherwise,\n\t\t * if a command is bound to this button by the `command` property, then\n\t\t * that command will be returned.\n\t\t *\n\t\t * This method implements the {@link CKEDITOR.feature#toFeature} interface method.\n\t\t *\n\t\t * @since 4.1\n\t\t * @param {CKEDITOR.editor} Editor instance.\n\t\t * @returns {CKEDITOR.feature} The feature.\n\t\t */\n\t\ttoFeature: function( editor ) {\n\t\t\tif ( this._.feature )\n\t\t\t\treturn this._.feature;\n\n\t\t\tvar feature = this;\n\n\t\t\t// If button isn't a feature, return command if is bound.\n\t\t\tif ( !this.allowedContent && !this.requiredContent && this.command )\n\t\t\t\tfeature = editor.getCommand( this.command ) || feature;\n\n\t\t\treturn this._.feature = feature;\n\t\t}\n\t};\n\n\t/**\n\t * Adds a button definition to the UI elements list.\n\t *\n\t *\t\teditorInstance.ui.addButton( 'MyBold', {\n\t *\t\t\tlabel: 'My Bold',\n\t *\t\t\tcommand: 'bold',\n\t *\t\t\ttoolbar: 'basicstyles,1'\n\t *\t\t} );\n\t *\n\t * @member CKEDITOR.ui\n\t * @param {String} name The button name.\n\t * @param {Object} definition The button definition.\n\t * @param {String} definition.label The textual part of the button (if visible) and its tooltip.\n\t * @param {String} definition.command The command to be executed once the button is activated.\n\t * @param {String} definition.toolbar The {@link CKEDITOR.config#toolbarGroups toolbar group} into which\n\t * the button will be added. An optional index value (separated by a comma) determines the button position within the group.\n\t */\n\tCKEDITOR.ui.prototype.addButton = function( name, definition ) {\n\t\tthis.add( name, CKEDITOR.UI_BUTTON, definition );\n\t};\n\n} )();\n"]}