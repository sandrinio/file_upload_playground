{"version":3,"sources":["../../../../../public/ckeditor/plugins/imageuploader/function.js"],"names":["showImage","imgSrc","imgStyle","$","attr","show","slideDown","showEditBar","imgID","imgName","slideUp","removeClass","addClass","css","document","mouseup","e","container","is","target","has","length","hideEditBar","currentpluginver","pluginversion","useImage","getUrlParam","paramName","reParam","RegExp","match","window","location","search","funcNum","fileUrl","opener","CKEDITOR","tools","callFunction","close","uploadImg","pluginSettings","ready","html","pluginname","plugindwonload","lazyload","elem","text","btn","btnCancel","click","fadeIn","hide","updateImagePath","name","ajax","method","url","data","newpath","done","msg","setTimeout","reload","useHistoryPath","path","extensionSettings","setting","extension","checkUpload","getElementById","files","alert","toggleQEditIcons","toggle","toogleQEditMode","Cookies","set","remove","slideToggle","get","drop","preventDefault","file","dataTransfer","type","formdata","FormData","append","xhr","XMLHttpRequest","open","send","onreadystatechange","readyState","status","reloadImages","toggleDropzone","s","deleteImg","src","imgid","img","imgDiv","ajaxSetup","cache","load","response","selectLang","lang","expires","openLangPanel","enableNews","disableNews","logOut","keyup","keyCode","next","trigger"],"mappings":"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","file":"function.js","sourcesContent":["// Copyright (c) 2015, Fujana Solutions - Moritz Maleck. All rights reserved.\n// For licensing, see LICENSE.md\n\n// Open image modal\nfunction showImage(imgSrc, imgStyle) {\n    $(\"#imageFSimg\").attr('src', imgSrc);\n    $(\"#imageFSimg\").attr('style', 'max-width:' + imgStyle + 'px');\n\n    $(\"#imageFullSreen\").show();\n    $(\"#background\").slideDown(250, \"swing\");\n\n    $(\"#imgActionUse\").attr(\"onclick\",\"useImage('\" + imgSrc + \"')\");\n    $(\"#imgActionDownload\").attr(\"href\", imgSrc);\n\n}\n\n// Open editbar\nfunction showEditBar(imgSrc, imgStyle, imgID, imgName) {\n    var imgSrc = imgSrc;\n    var imgStyle = imgStyle;\n    var imgID = imgID;\n    var imgName = imgName;\n\n    $(\"#editbar\").slideUp(100);\n    $(\"#editbar\").slideDown(100);\n    \n    $(\".fileDiv,.fullWidthFileDiv\").removeClass( \"selected\" );\n    $(\"div[data-imgid='\" + imgID +\"']\").addClass( \"selected\" );\n    \n    $(\"#updates\").css(\"visibility\", \"hidden\"); \n    $(\"#updates\").slideUp(150);\n    \n    $(\"#editbarDelete\").attr(\"onclick\",\"deleteImg('\" + imgName + \"', '\" + imgID + \"');\");\n    $(\"#editbarUse\").attr(\"onclick\",\"useImage('\" + imgSrc + \"')\");\n    $(\"#editbarView\").attr(\"onclick\",\"showImage('\" + imgSrc + \"','\" + imgStyle + \"')\");\n    $(\"#editbarDownload\").attr(\"href\", imgSrc);\n}\n\n// hide editbar if user clicks outside of element\n$(document).mouseup(function (e) {\n    var container = $(\".fileDiv,.fullWidthFileDiv,#editbar\");\n\n    if (!container.is(e.target) // if the target of the click isn't the container...\n        && container.has(e.target).length === 0) // ... nor a descendant of the container\n    {\n        hideEditBar();\n    }\n});\n\n// hide editbar function\nfunction hideEditBar() {\n    $(\"#editbar\").slideUp(100);\n    \n    $(\".fileDiv,.fullWidthFileDiv\").removeClass( \"selected\" );\n    \n    if (currentpluginver != pluginversion) {\n        $(\"#updates\").slideDown(150);\n        $(\"#updates\").css(\"visibility\", \"visible\"); \n    };\n}\n\n// Use image and overgive image src to ckeditor\nfunction useImage(imgSrc) {\n    function getUrlParam( paramName ) {\n        var reParam = new RegExp( '(?:[\\?&]|&)' + paramName + '=([^&]+)', 'i' ) ;\n        var match = window.location.search.match(reParam) ;\n\n        return ( match && match.length > 1 ) ? match[ 1 ] : null ;\n    }\n    var funcNum = getUrlParam( 'CKEditorFuncNum' );\n    var imgSrc = imgSrc;\n    var fileUrl = imgSrc;\n    window.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl );\n    window.close();\n}\n\n// open upload image modal\nfunction uploadImg() {\n\n    $(\"#uploadImgDiv\").show();\n    $(\"#background2\").slideDown(250, \"swing\");\n\n}\n\n// open settings modal\nfunction pluginSettings() {\n\n    $(\"#settingsDiv\").show();\n    $(\"#background3\").slideDown(250, \"swing\");\n\n}\n\n// check if new version is available\n$( document ).ready(function() {\n    if (currentpluginver != pluginversion) {\n        $(\"#updates\").show();\n        $('#updates').html(\"A new version of \"+ pluginname +\" (\"+ pluginversion +\") is available. <a target=\\\"_blank\\\" href=\\\"\"+ plugindwonload +\"\\\">Download it now!</a>\");\n    };\n});\n\n// call jquery lazy load\n$(function() {\n    $(\"img.lazy\").lazyload();\n}); \n\n$( document ).ready(function() {\n    var elem = '#uploadpathEditable';\n    var text = '.saveUploadPathP';\n    var btn = '.saveUploadPathA';\n    var btnCancel = '#pathCancel';\n    $( elem ).attr('contenteditable','true');\n    $( elem ).click(function() {\n        $( this ).addClass(\"editableActive\");\n        $( btn ).fadeIn();\n        $( text ).show();\n        $( '.pathHistory' ).fadeIn();\n    });\n    $( btnCancel ).click(function() {\n        $( elem ).removeClass('editableActive');\n        $( btn ).hide();\n        $( text ).hide();\n        $( '.pathHistory' ).hide();\n    });\n});\n\nfunction updateImagePath(){\n    var name = $(\"#uploadpathEditable\").text();\n    $.ajax({\n      method: \"POST\",\n      url: \"pluginconfig.php\",\n      data: { newpath: name, }\n    }).done(function( msg ) {\n        $('#settingsDiv').hide();\n        $('#background3').slideUp(250, 'swing');\n\n        setTimeout(function(){\n            location.reload();\n        }, 250);\n    });\n}\n\nfunction useHistoryPath(path){\n    var path = path;\n    $.ajax({\n      method: \"POST\",\n      url: \"pluginconfig.php\",\n      data: { newpath: path, }\n    }).done(function( msg ) {\n        $('#settingsDiv').hide();\n        $('#background3').slideUp(250, 'swing');\n\n        setTimeout(function(){\n            location.reload();\n        }, 250);\n    });\n}\n\n// open pluginconfig.php to change the extension settings\nfunction extensionSettings(setting){\n    var setting = setting;\n    $.ajax({\n      method: \"POST\",\n      url: \"pluginconfig.php\",\n      data: { \n          extension: setting,\n      }\n    }).done(function( msg ) {\n        $('#settingsDiv').hide();\n        $('#background3').slideUp(250, 'swing');\n\n        setTimeout(function(){\n            location.reload();\n        }, 250);\n    });\n}\n\n// check if a file to upload is selected\nfunction checkUpload(){\n    if( document.getElementById(\"upload\").files.length == 0 ){\n        alert(\"Please select a file to upload.\");\n        return false;\n    }\n}\n\n// toggle the edit icons\nfunction toggleQEditIcons(){\n    $( '.fullWidthlastChild, .qEditIconsDiv' ).toggle();\n}\n\n// toggle the edit mode\nfunction toogleQEditMode(){\n    if($('#qEditBtnOpen').is(':visible')){\n        Cookies.set('qEditMode', 'yes');\n    } else {\n        Cookies.remove('qEditMode');\n    }\n    toggleQEditIcons();\n    $( '#qEditBtnDone, #qEditBtnOpen' ).slideToggle();\n}\n\n// check if qEditMode is activated\n$( document ).ready(function() {\n    if(Cookies.get('qEditMode') == \"yes\"){\n        toogleQEditMode();\n    }\n});\n\n// drag n' drop\nfunction drop(e) {\n    e.preventDefault();\n    \n    var file = e.dataTransfer.files[0];\n    \n    if(file && file.type.match(\"image/*\")) {\n                    \n        var formdata = new FormData();\n        formdata.append('upload', file);\n            \n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', 'imgupload.php');\n        xhr.send(formdata);\n        \n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4 && xhr.status == 200) {\n                hideEditBar();\n                reloadImages();\n                setTimeout(function(){\n                    $(\"#dropzone\").slideUp(450, \"swing\");\n                }, 50);\n            }\n        }\n    }\n}\n\n// toggle dropzone\nfunction toggleDropzone(s) {\n    var elem = $(\"#dropzone\");\n    if(s == \"show\") {\n        elem.show();\n    } else {\n        elem.hide();\n    }\n}\n\n// hide dropzone if user clicks close\n$( document ).ready(function() {\n    $( \"#dropzone\" ).click(function() {\n        setTimeout(function(){\n            toggleDropzone('hide');\n        }, 500);\n    });\n});\n\n// delete image\nfunction deleteImg(src, imgid) {\n    $.ajax({\n       method: \"GET\",\n        url: \"imgdelete.php\",\n        data: {\n            img: src,\n        }\n    }).done(function() {\n        var imgDiv = $( \"div[data-imgid='\" + imgid +\"']\" );\n        if(Cookies.get('file_style') == \"block\"){\n            imgDiv.addClass(\"deleteAnimationBlock\");\n        } else {\n            imgDiv.slideUp(250, \"swing\");\n        }\n        setTimeout(function(){\n            imgDiv.hide();\n            hideEditBar();\n            reloadImages();\n        }, 320);\n    });\n}\n\n\n// reload images\nfunction reloadImages() {\n    $.ajaxSetup({cache:false});\n    $('#files').load('function.php?f=loadImages', function(response, status, xhr) {\n         $(\"img.lazy\").lazyload();\n     });\n}\n\n// select language\nfunction selectLang(lang) {\n    Cookies.set('sy_lang', lang, { expires: 1095 });\n    \n    $('#setLangDiv').hide();\n    $('#background4').slideUp(250, 'swing');\n    \n    setTimeout(function(){\n        location.reload();\n    }, 250);\n}\n\n// open lang panel\nfunction openLangPanel() {\n    $('#settingsDiv').hide();\n    $('#background3').slideUp(250, 'swing');\n    \n    setTimeout(function(){\n        $(\"#setLangDiv\").show();\n        $(\"#background4\").slideDown(250, \"swing\");\n    }, 350);\n}\n\n// enable news\nfunction enableNews() {\n    Cookies.remove('show_news');\n    \n    $('#settingsDiv').hide();\n    $('#background3').slideUp(250, 'swing');\n    \n    setTimeout(function(){\n        location.reload();\n    }, 250);\n}\n\n// disable news\nfunction disableNews() {\n    Cookies.set('show_news', 'no', { expires: 7 });\n    \n    $('#settingsDiv').hide();\n    $('#background3').slideUp(250, 'swing');\n    \n    setTimeout(function(){\n        location.reload();\n    }, 250);\n}\n\nfunction logOut(){\n    $.ajax({\n      method: \"POST\",\n      url: \"logout.php\",\n    }).done(function( msg ) {\n        $('#settingsDiv').hide();\n        $('#background3').slideUp(250, 'swing');\n\n        setTimeout(function(){\n            location.reload();\n        }, 300);\n    });\n}\n\n// keyboard shortcuts\n$(document).keyup(function (e){\n    // left arrow and top arrow\n    if (e.keyCode == 37 || e.keyCode == 38) {\n        var imgID = $(\".selected\").data(\"imgid\");\n        if(typeof imgID === 'undefined'){\n            var imgID = 2;\n        };\n        var next = --imgID;\n        $( \"div[data-imgid='\" + next +\"']\" ).trigger( \"click\" );\n    }\n    // right arrow and bottom arrow\n    if (e.keyCode == 39 || e.keyCode == 40) {\n        var imgID = $(\".selected\").data(\"imgid\");\n        if(typeof imgID === 'undefined'){\n            var imgID = 0;\n        };\n        var next = ++imgID;\n        $( \"div[data-imgid='\" + next +\"']\" ).trigger( \"click\" );\n    }\n    // space\n    if (e.keyCode == 32) {\n        if($('#imageFullSreen').is(':visible')){\n            $( \"#imageFullSreenClose\" ).trigger( \"click\" );\n        } else {\n            var imgID = $(\".selected\").data(\"imgid\");\n            if(typeof imgID !== 'undefined'){\n                $( \"#editbarView\" ).trigger( \"click\" );\n            }\n        }\n    }\n})"]}