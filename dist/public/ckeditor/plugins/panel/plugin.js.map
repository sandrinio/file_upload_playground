{"version":3,"sources":["../../../../../public/ckeditor/plugins/panel/plugin.js"],"names":["CKEDITOR","plugins","add","beforeInit","editor","ui","addHandler","UI_PANEL","panel","handler","document","definition","tools","extend","className","css","id","getNextId","isFramed","forceIFrame","length","_","blocks","create","panelTpl","addTemplate","frameTpl","frameDocTpl","prototype","render","output","getHolderElement","holder","iframe","getById","parentDiv","getParent","doc","getFrameDocument","env","iOS","setStyles","onLoad","addFunction","bind","isLoaded","write","buildStyleHtml","onload","data","win","getWindow","$","on","evt","keystroke","getKeystroke","dir","getAttribute","onKeyDown","preventDefault","onEscape","getBody","unselectable","air","callFunction","editorId","langCode","lang","cls","frame","cssClass","config","baseFloatZIndex","src","ie","encodeURIComponent","fixDomain","html","push","addBlock","name","block","currentBlock","showBlock","getBlock","current","hide","fire","focusIndex","show","destroy","element","remove","createClass","blockHolder","blockDefinition","append","getDocument","createElement","attributes","styles","display","setAttributes","role","title","keys","disableContextMenu","markItem","index","links","getElementsByTag","item","getItem","webkit","focus","onMark","markFirstDisplayed","beforeMark","notDisplayed","type","NODE_ELEMENT","getStyle","getItems","focused","i","count","getAscendant","proto","setStyle","onHide","call","noCycle","keyAction","link","offsetWidth"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or http://ckeditor.com/license\n */\n\n( function() {\n\tCKEDITOR.plugins.add( 'panel', {\n\t\tbeforeInit: function( editor ) {\n\t\t\teditor.ui.addHandler( CKEDITOR.UI_PANEL, CKEDITOR.ui.panel.handler );\n\t\t}\n\t} );\n\n\t/**\n\t * Panel UI element.\n\t *\n\t * @readonly\n\t * @property {String} [='panel']\n\t * @member CKEDITOR\n\t */\n\tCKEDITOR.UI_PANEL = 'panel';\n\n\t/**\n\t * @class\n\t * @constructor Creates a panel class instance.\n\t * @param {CKEDITOR.dom.document} document\n\t * @param {Object} definition\n\t */\n\tCKEDITOR.ui.panel = function( document, definition ) {\n\t\t// Copy all definition properties to this object.\n\t\tif ( definition )\n\t\t\tCKEDITOR.tools.extend( this, definition );\n\n\t\t// Set defaults.\n\t\tCKEDITOR.tools.extend( this, {\n\t\t\tclassName: '',\n\t\t\tcss: []\n\t\t} );\n\n\t\tthis.id = CKEDITOR.tools.getNextId();\n\t\tthis.document = document;\n\t\tthis.isFramed = this.forceIFrame || this.css.length;\n\n\t\tthis._ = {\n\t\t\tblocks: {}\n\t\t};\n\t};\n\n\t/**\n\t * Represents panel handler object.\n\t *\n\t * @class\n\t * @singleton\n\t * @extends CKEDITOR.ui.handlerDefinition\n\t */\n\tCKEDITOR.ui.panel.handler = {\n\t\t/**\n\t\t * Transforms a panel definition in a {@link CKEDITOR.ui.panel} instance.\n\t\t *\n\t\t * @param {Object} definition\n\t\t * @returns {CKEDITOR.ui.panel}\n\t\t */\n\t\tcreate: function( definition ) {\n\t\t\treturn new CKEDITOR.ui.panel( definition );\n\t\t}\n\t};\n\n\tvar panelTpl = CKEDITOR.addTemplate( 'panel', '<div lang=\"{langCode}\" id=\"{id}\" dir={dir}' +\n\t\t' class=\"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}\"' +\n\t\t' style=\"z-index:{z-index}\" role=\"presentation\">' +\n\t\t'{frame}' +\n\t\t'</div>' );\n\n\tvar frameTpl = CKEDITOR.addTemplate( 'panel-frame', '<iframe id=\"{id}\" class=\"cke_panel_frame\" role=\"presentation\" frameborder=\"0\" src=\"{src}\"></iframe>' );\n\n\tvar frameDocTpl = CKEDITOR.addTemplate( 'panel-frame-inner', '<!DOCTYPE html>' +\n\t\t'<html class=\"cke_panel_container {env}\" dir=\"{dir}\" lang=\"{langCode}\">' +\n\t\t\t'<head>{css}</head>' +\n\t\t\t'<body class=\"cke_{dir}\"' +\n\t\t\t\t' style=\"margin:0;padding:0\" onload=\"{onload}\"></body>' +\n\t\t'<\\/html>' );\n\n\t/** @class CKEDITOR.ui.panel */\n\tCKEDITOR.ui.panel.prototype = {\n\t\t/**\n\t\t * Renders the combo.\n\t\t *\n\t\t * @param {CKEDITOR.editor} editor The editor instance which this button is\n\t\t * to be used by.\n\t\t * @param {Array} [output] The output array to which append the HTML relative\n\t\t * to this button.\n\t\t */\n\t\trender: function( editor, output ) {\n\t\t\tthis.getHolderElement = function() {\n\t\t\t\tvar holder = this._.holder;\n\n\t\t\t\tif ( !holder ) {\n\t\t\t\t\tif ( this.isFramed ) {\n\t\t\t\t\t\tvar iframe = this.document.getById( this.id + '_frame' ),\n\t\t\t\t\t\t\tparentDiv = iframe.getParent(),\n\t\t\t\t\t\t\tdoc = iframe.getFrameDocument();\n\n\t\t\t\t\t\t// Make it scrollable on iOS. (http://dev.ckeditor.com/ticket/8308)\n\t\t\t\t\t\tCKEDITOR.env.iOS && parentDiv.setStyles( {\n\t\t\t\t\t\t\t'overflow': 'scroll',\n\t\t\t\t\t\t\t'-webkit-overflow-scrolling': 'touch'\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tvar onLoad = CKEDITOR.tools.addFunction( CKEDITOR.tools.bind( function() {\n\t\t\t\t\t\t\tthis.isLoaded = true;\n\t\t\t\t\t\t\tif ( this.onLoad )\n\t\t\t\t\t\t\t\tthis.onLoad();\n\t\t\t\t\t\t}, this ) );\n\n\t\t\t\t\t\tdoc.write( frameDocTpl.output( CKEDITOR.tools.extend( {\n\t\t\t\t\t\t\tcss: CKEDITOR.tools.buildStyleHtml( this.css ),\n\t\t\t\t\t\t\tonload: 'window.parent.CKEDITOR.tools.callFunction(' + onLoad + ');'\n\t\t\t\t\t\t}, data ) ) );\n\n\t\t\t\t\t\tvar win = doc.getWindow();\n\n\t\t\t\t\t\t// Register the CKEDITOR global.\n\t\t\t\t\t\twin.$.CKEDITOR = CKEDITOR;\n\n\t\t\t\t\t\t// Arrow keys for scrolling is only preventable with 'keypress' event in Opera (http://dev.ckeditor.com/ticket/4534).\n\t\t\t\t\t\tdoc.on( 'keydown', function( evt ) {\n\t\t\t\t\t\t\tvar keystroke = evt.data.getKeystroke(),\n\t\t\t\t\t\t\t\tdir = this.document.getById( this.id ).getAttribute( 'dir' );\n\n\t\t\t\t\t\t\t// Delegate key processing to block.\n\t\t\t\t\t\t\tif ( this._.onKeyDown && this._.onKeyDown( keystroke ) === false ) {\n\t\t\t\t\t\t\t\tevt.data.preventDefault();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// ESC/ARROW-LEFT(ltr) OR ARROW-RIGHT(rtl)\n\t\t\t\t\t\t\tif ( keystroke == 27 || keystroke == ( dir == 'rtl' ? 39 : 37 ) ) {\n\t\t\t\t\t\t\t\tif ( this.onEscape && this.onEscape( keystroke ) === false )\n\t\t\t\t\t\t\t\t\tevt.data.preventDefault();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this );\n\n\t\t\t\t\t\tholder = doc.getBody();\n\t\t\t\t\t\tholder.unselectable();\n\t\t\t\t\t\tCKEDITOR.env.air && CKEDITOR.tools.callFunction( onLoad );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tholder = this.document.getById( this.id );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._.holder = holder;\n\t\t\t\t}\n\n\t\t\t\treturn holder;\n\t\t\t};\n\n\t\t\tvar data = {\n\t\t\t\teditorId: editor.id,\n\t\t\t\tid: this.id,\n\t\t\t\tlangCode: editor.langCode,\n\t\t\t\tdir: editor.lang.dir,\n\t\t\t\tcls: this.className,\n\t\t\t\tframe: '',\n\t\t\t\tenv: CKEDITOR.env.cssClass,\n\t\t\t\t'z-index': editor.config.baseFloatZIndex + 1\n\t\t\t};\n\n\t\t\tif ( this.isFramed ) {\n\t\t\t\t// With IE, the custom domain has to be taken care at first,\n\t\t\t\t// for other browers, the 'src' attribute should be left empty to\n\t\t\t\t// trigger iframe's 'load' event.\n\t\t\t\tvar src =\n\t\t\t\t\tCKEDITOR.env.air ? 'javascript:void(0)' : // jshint ignore:line\n\t\t\t\t\tCKEDITOR.env.ie ? 'javascript:void(function(){' + encodeURIComponent( // jshint ignore:line\n\t\t\t\t\t\t'document.open();' +\n\t\t\t\t\t\t// In IE, the document domain must be set any time we call document.open().\n\t\t\t\t\t\t'(' + CKEDITOR.tools.fixDomain + ')();' +\n\t\t\t\t\t\t'document.close();'\n\t\t\t\t\t) + '}())' :\n\t\t\t\t\t'';\n\n\t\t\t\tdata.frame = frameTpl.output( {\n\t\t\t\t\tid: this.id + '_frame',\n\t\t\t\t\tsrc: src\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tvar html = panelTpl.output( data );\n\n\t\t\tif ( output )\n\t\t\t\toutput.push( html );\n\n\t\t\treturn html;\n\t\t},\n\n\t\t/**\n\t\t * @todo\n\t\t */\n\t\taddBlock: function( name, block ) {\n\t\t\tblock = this._.blocks[ name ] = block instanceof CKEDITOR.ui.panel.block ? block : new CKEDITOR.ui.panel.block( this.getHolderElement(), block );\n\n\t\t\tif ( !this._.currentBlock )\n\t\t\t\tthis.showBlock( name );\n\n\t\t\treturn block;\n\t\t},\n\n\t\t/**\n\t\t * @todo\n\t\t */\n\t\tgetBlock: function( name ) {\n\t\t\treturn this._.blocks[ name ];\n\t\t},\n\n\t\t/**\n\t\t * @todo\n\t\t */\n\t\tshowBlock: function( name ) {\n\t\t\tvar blocks = this._.blocks,\n\t\t\t\tblock = blocks[ name ],\n\t\t\t\tcurrent = this._.currentBlock;\n\n\t\t\t// ARIA role works better in IE on the body element, while on the iframe\n\t\t\t// for FF. (http://dev.ckeditor.com/ticket/8864)\n\t\t\tvar holder = !this.forceIFrame || CKEDITOR.env.ie ? this._.holder : this.document.getById( this.id + '_frame' );\n\n\t\t\tif ( current )\n\t\t\t\tcurrent.hide();\n\n\t\t\tthis._.currentBlock = block;\n\n\t\t\tCKEDITOR.fire( 'ariaWidget', holder );\n\n\t\t\t// Reset the focus index, so it will always go into the first one.\n\t\t\tblock._.focusIndex = -1;\n\n\t\t\tthis._.onKeyDown = block.onKeyDown && CKEDITOR.tools.bind( block.onKeyDown, block );\n\n\t\t\tblock.show();\n\n\t\t\treturn block;\n\t\t},\n\n\t\t/**\n\t\t * @todo\n\t\t */\n\t\tdestroy: function() {\n\t\t\tthis.element && this.element.remove();\n\t\t}\n\t};\n\n\t/**\n\t * @class\n\t *\n\t * @todo class and all methods\n\t */\n\tCKEDITOR.ui.panel.block = CKEDITOR.tools.createClass( {\n\t\t/**\n\t\t * Creates a block class instances.\n\t\t *\n\t\t * @constructor\n\t\t * @todo\n\t\t */\n\t\t$: function( blockHolder, blockDefinition ) {\n\t\t\tthis.element = blockHolder.append( blockHolder.getDocument().createElement( 'div', {\n\t\t\t\tattributes: {\n\t\t\t\t\t'tabindex': -1,\n\t\t\t\t\t'class': 'cke_panel_block'\n\t\t\t\t},\n\t\t\t\tstyles: {\n\t\t\t\t\tdisplay: 'none'\n\t\t\t\t}\n\t\t\t} ) );\n\n\t\t\t// Copy all definition properties to this object.\n\t\t\tif ( blockDefinition )\n\t\t\t\tCKEDITOR.tools.extend( this, blockDefinition );\n\n\t\t\t// Set the a11y attributes of this element ...\n\t\t\tthis.element.setAttributes( {\n\t\t\t\t'role': this.attributes.role || 'presentation',\n\t\t\t\t'aria-label': this.attributes[ 'aria-label' ],\n\t\t\t\t'title': this.attributes.title || this.attributes[ 'aria-label' ]\n\t\t\t} );\n\n\t\t\tthis.keys = {};\n\n\t\t\tthis._.focusIndex = -1;\n\n\t\t\t// Disable context menu for panels.\n\t\t\tthis.element.disableContextMenu();\n\t\t},\n\n\t\t_: {\n\n\t\t\t/**\n\t\t\t * Mark the item specified by the index as current activated.\n\t\t\t */\n\t\t\tmarkItem: function( index ) {\n\t\t\t\tif ( index == -1 )\n\t\t\t\t\treturn;\n\t\t\t\tvar links = this.element.getElementsByTag( 'a' );\n\t\t\t\tvar item = links.getItem( this._.focusIndex = index );\n\n\t\t\t\t// Safari need focus on the iframe window first(http://dev.ckeditor.com/ticket/3389), but we need\n\t\t\t\t// lock the blur to avoid hiding the panel.\n\t\t\t\tif ( CKEDITOR.env.webkit )\n\t\t\t\t\titem.getDocument().getWindow().focus();\n\t\t\t\titem.focus();\n\n\t\t\t\tthis.onMark && this.onMark( item );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Marks the first visible item or the one whose `aria-selected` attribute is set to `true`.\n\t\t\t * The latter has priority over the former.\n\t\t\t *\n\t\t\t * @private\n\t\t\t * @param beforeMark function to be executed just before marking.\n\t\t\t * Used in cases when any preparatory cleanup (like unmarking all items) would simultaneously\n\t\t\t * destroy the information that is needed to determine the focused item.\n\t\t\t */\n\t\t\tmarkFirstDisplayed: function( beforeMark ) {\n\t\t\t\tvar notDisplayed = function( element ) {\n\t\t\t\t\t\treturn element.type == CKEDITOR.NODE_ELEMENT && element.getStyle( 'display' ) == 'none';\n\t\t\t\t\t},\n\t\t\t\t\tlinks = this._.getItems(),\n\t\t\t\t\titem, focused;\n\n\t\t\t\tfor ( var i = links.count() - 1; i >= 0; i-- ) {\n\t\t\t\t\titem = links.getItem( i );\n\n\t\t\t\t\tif ( !item.getAscendant( notDisplayed ) ) {\n\t\t\t\t\t\tfocused = item;\n\t\t\t\t\t\tthis._.focusIndex = i;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( item.getAttribute( 'aria-selected' ) == 'true' ) {\n\t\t\t\t\t\tfocused = item;\n\t\t\t\t\t\tthis._.focusIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !focused ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( beforeMark ) {\n\t\t\t\t\tbeforeMark();\n\t\t\t\t}\n\n\t\t\t\tif ( CKEDITOR.env.webkit )\n\t\t\t\t\tfocused.getDocument().getWindow().focus();\n\t\t\t\tfocused.focus();\n\n\t\t\t\tthis.onMark && this.onMark( focused );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns a `CKEDITOR.dom.nodeList` of block items.\n\t\t\t *\n\t\t\t * @returns {*|CKEDITOR.dom.nodeList}\n\t\t\t */\n\t\t\tgetItems: function() {\n\t\t\t\treturn this.element.getElementsByTag( 'a' );\n\t\t\t}\n\t\t},\n\n\t\tproto: {\n\t\t\tshow: function() {\n\t\t\t\tthis.element.setStyle( 'display', '' );\n\t\t\t},\n\n\t\t\thide: function() {\n\t\t\t\tif ( !this.onHide || this.onHide.call( this ) !== true )\n\t\t\t\t\tthis.element.setStyle( 'display', 'none' );\n\t\t\t},\n\n\t\t\tonKeyDown: function( keystroke, noCycle ) {\n\t\t\t\tvar keyAction = this.keys[ keystroke ];\n\t\t\t\tswitch ( keyAction ) {\n\t\t\t\t\t// Move forward.\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\tvar index = this._.focusIndex,\n\t\t\t\t\t\t\tlinks = this.element.getElementsByTag( 'a' ),\n\t\t\t\t\t\t\tlink;\n\n\t\t\t\t\t\twhile ( ( link = links.getItem( ++index ) ) ) {\n\t\t\t\t\t\t\t// Move the focus only if the element is marked with\n\t\t\t\t\t\t\t// the _cke_focus and it it's visible (check if it has\n\t\t\t\t\t\t\t// width).\n\t\t\t\t\t\t\tif ( link.getAttribute( '_cke_focus' ) && link.$.offsetWidth ) {\n\t\t\t\t\t\t\t\tthis._.focusIndex = index;\n\t\t\t\t\t\t\t\tlink.focus();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If no link was found, cycle and restart from the top. (http://dev.ckeditor.com/ticket/11125)\n\t\t\t\t\t\tif ( !link && !noCycle ) {\n\t\t\t\t\t\t\tthis._.focusIndex = -1;\n\t\t\t\t\t\t\treturn this.onKeyDown( keystroke, 1 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t// Move backward.\n\t\t\t\t\tcase 'prev':\n\t\t\t\t\t\tindex = this._.focusIndex;\n\t\t\t\t\t\tlinks = this.element.getElementsByTag( 'a' );\n\n\t\t\t\t\t\twhile ( index > 0 && ( link = links.getItem( --index ) ) ) {\n\t\t\t\t\t\t\t// Move the focus only if the element is marked with\n\t\t\t\t\t\t\t// the _cke_focus and it it's visible (check if it has\n\t\t\t\t\t\t\t// width).\n\t\t\t\t\t\t\tif ( link.getAttribute( '_cke_focus' ) && link.$.offsetWidth ) {\n\t\t\t\t\t\t\t\tthis._.focusIndex = index;\n\t\t\t\t\t\t\t\tlink.focus();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Make sure link is null when the loop ends and nothing was\n\t\t\t\t\t\t\t// found (http://dev.ckeditor.com/ticket/11125).\n\t\t\t\t\t\t\tlink = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If no link was found, cycle and restart from the bottom. (http://dev.ckeditor.com/ticket/11125)\n\t\t\t\t\t\tif ( !link && !noCycle ) {\n\t\t\t\t\t\t\tthis._.focusIndex = links.count();\n\t\t\t\t\t\t\treturn this.onKeyDown( keystroke, 1 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\tcase 'click':\n\t\t\t\t\tcase 'mouseup':\n\t\t\t\t\t\tindex = this._.focusIndex;\n\t\t\t\t\t\tlink = index >= 0 && this.element.getElementsByTag( 'a' ).getItem( index );\n\n\t\t\t\t\t\tif ( link )\n\t\t\t\t\t\t\tlink.$[ keyAction ] ? link.$[ keyAction ]() : link.$[ 'on' + keyAction ]();\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} );\n\n} )();\n\n/**\n * Fired when a panel is added to the document.\n *\n * @event ariaWidget\n * @member CKEDITOR\n * @param {Object} data The element wrapping the panel.\n */\n"]}