{"version":3,"sources":["../../../../../public/ckeditor/plugins/colorbutton/plugin.js"],"names":["CKEDITOR","plugins","add","requires","lang","icons","hidpi","init","editor","config","colorbutton","env","hc","addButton","textColorTitle","contentTransformations","element","check","left","attributes","color","right","name","styles","bgOptions","normalizeBackground","colorButton_normalizeBackground","undefined","tools","background","style","parse","objectKeys","length","colorButton_backStyle","definition","getDefinition","bgColorTitle","type","title","order","options","colorBoxId","getNextId","panelBlock","ui","UI_PANELBUTTON","label","modes","wysiwyg","editorFocus","toolbar","allowedContent","requiredContent","panel","css","skin","getPath","role","panelTitle","onBlock","block","autoSize","addClass","setHtml","renderColors","getDocument","getBody","setStyle","fire","keys","rtl","dir","SHIFT","refresh","activeFilter","setState","TRISTATE_DISABLED","onOpen","selection","getSelection","getStartElement","path","elementPath","automaticColor","blockLimit","document","getComputedStyle","getParent","colorButton_enableAutomatic","_","iframe","getFrameDocument","getById","range","getRanges","walker","dom","collapsed","startContainer","next","finalColor","currentColor","NODE_TEXT","normalizeColor","selectColor","output","colors","colorButton_colors","split","colorsPerRow","colorButton_colorsPerRow","moreColorsEnabled","colordialog","colorButton_enableMore","total","clickFn","addFunction","applyColorStyle","onColorDialogClose","evt","removeListener","getContentElement","getValue","openDialog","on","focus","hide","removeStyle","colorStyle","childRule","isUnstylable","is","getElementsByTag","count","applyStyle","push","auto","i","parts","colorName","colorCode","replace","colorLabel","more","join","ele","getAttribute","items","getItems","item","getItem","removeAttribute","setAttribute","convertRgbToHex","toLowerCase","colorButton_foreStyle","overrides"],"mappings":"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","file":"plugin.js","sourcesContent":["﻿/**\n * @license Copyright (c) 2003-2017, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or http://ckeditor.com/license\n */\n\n/**\n * @fileOverview The \"colorbutton\" plugin that makes it possible to assign\n *               text and background colors to editor contents.\n *\n */\nCKEDITOR.plugins.add( 'colorbutton', {\n\trequires: 'panelbutton,floatpanel',\n\t// jscs:disable maximumLineLength\n\tlang: 'af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn', // %REMOVE_LINE_CORE%\n\t// jscs:enable maximumLineLength\n\ticons: 'bgcolor,textcolor', // %REMOVE_LINE_CORE%\n\thidpi: true, // %REMOVE_LINE_CORE%\n\tinit: function( editor ) {\n\t\tvar config = editor.config,\n\t\t\tlang = editor.lang.colorbutton;\n\n\t\tif ( !CKEDITOR.env.hc ) {\n\t\t\taddButton( 'TextColor', 'fore', lang.textColorTitle, 10, {\n\t\t\t\tcontentTransformations: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telement: 'font',\n\t\t\t\t\t\t\tcheck: 'span{color}',\n\t\t\t\t\t\t\tleft: function( element ) {\n\t\t\t\t\t\t\t\treturn !!element.attributes.color;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tright: function( element ) {\n\t\t\t\t\t\t\t\telement.name = 'span';\n\n\t\t\t\t\t\t\t\telement.attributes.color && ( element.styles.color = element.attributes.color );\n\t\t\t\t\t\t\t\tdelete element.attributes.color;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t} );\n\n\t\t\tvar  bgOptions = {},\n\t\t\t\tnormalizeBackground = editor.config.colorButton_normalizeBackground;\n\n\t\t\tif ( normalizeBackground === undefined || normalizeBackground ) {\n\t\t\t\t// If background contains only color, then we want to convert it into background-color so that it's\n\t\t\t\t// correctly picked by colorbutton plugin.\n\t\t\t\tbgOptions.contentTransformations = [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Transform span that specify background with color only to background-color.\n\t\t\t\t\t\t\telement: 'span',\n\t\t\t\t\t\t\tleft: function( element ) {\n\t\t\t\t\t\t\t\tvar tools = CKEDITOR.tools;\n\t\t\t\t\t\t\t\tif ( element.name != 'span' || !element.styles || !element.styles.background ) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar background = tools.style.parse.background( element.styles.background );\n\n\t\t\t\t\t\t\t\t// We return true only if background specifies **only** color property, and there's only one background directive.\n\t\t\t\t\t\t\t\treturn background.color && tools.objectKeys( background ).length === 1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tright: function( element ) {\n\t\t\t\t\t\t\t\tvar style = new CKEDITOR.style( editor.config.colorButton_backStyle, {\n\t\t\t\t\t\t\t\t\t\tcolor: element.styles.background\n\t\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\t\tdefinition = style.getDefinition();\n\n\t\t\t\t\t\t\t\t// Align the output object with the template used in config.\n\t\t\t\t\t\t\t\telement.name = definition.element;\n\t\t\t\t\t\t\t\telement.styles = definition.styles;\n\t\t\t\t\t\t\t\telement.attributes = definition.attributes || {};\n\n\t\t\t\t\t\t\t\treturn element;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\taddButton( 'BGColor', 'back', lang.bgColorTitle, 20, bgOptions );\n\t\t}\n\n\t\tfunction addButton( name, type, title, order, options ) {\n\t\t\tvar style = new CKEDITOR.style( config[ 'colorButton_' + type + 'Style' ] ),\n\t\t\t\tcolorBoxId = CKEDITOR.tools.getNextId() + '_colorBox',\n\t\t\t\tpanelBlock;\n\n\t\t\toptions = options || {};\n\n\t\t\teditor.ui.add( name, CKEDITOR.UI_PANELBUTTON, {\n\t\t\t\tlabel: title,\n\t\t\t\ttitle: title,\n\t\t\t\tmodes: { wysiwyg: 1 },\n\t\t\t\teditorFocus: 0,\n\t\t\t\ttoolbar: 'colors,' + order,\n\t\t\t\tallowedContent: style,\n\t\t\t\trequiredContent: style,\n\t\t\t\tcontentTransformations: options.contentTransformations,\n\n\t\t\t\tpanel: {\n\t\t\t\t\tcss: CKEDITOR.skin.getPath( 'editor' ),\n\t\t\t\t\tattributes: { role: 'listbox', 'aria-label': lang.panelTitle }\n\t\t\t\t},\n\n\t\t\t\tonBlock: function( panel, block ) {\n\t\t\t\t\tpanelBlock = block;\n\n\t\t\t\t\tblock.autoSize = true;\n\t\t\t\t\tblock.element.addClass( 'cke_colorblock' );\n\t\t\t\t\tblock.element.setHtml( renderColors( panel, type, colorBoxId ) );\n\t\t\t\t\t// The block should not have scrollbars (http://dev.ckeditor.com/ticket/5933, http://dev.ckeditor.com/ticket/6056)\n\t\t\t\t\tblock.element.getDocument().getBody().setStyle( 'overflow', 'hidden' );\n\n\t\t\t\t\tCKEDITOR.ui.fire( 'ready', this );\n\n\t\t\t\t\tvar keys = block.keys;\n\t\t\t\t\tvar rtl = editor.lang.dir == 'rtl';\n\t\t\t\t\tkeys[ rtl ? 37 : 39 ] = 'next'; // ARROW-RIGHT\n\t\t\t\t\tkeys[ 40 ] = 'next'; // ARROW-DOWN\n\t\t\t\t\tkeys[ 9 ] = 'next'; // TAB\n\t\t\t\t\tkeys[ rtl ? 39 : 37 ] = 'prev'; // ARROW-LEFT\n\t\t\t\t\tkeys[ 38 ] = 'prev'; // ARROW-UP\n\t\t\t\t\tkeys[ CKEDITOR.SHIFT + 9 ] = 'prev'; // SHIFT + TAB\n\t\t\t\t\tkeys[ 32 ] = 'click'; // SPACE\n\t\t\t\t},\n\n\t\t\t\trefresh: function() {\n\t\t\t\t\tif ( !editor.activeFilter.check( style ) )\n\t\t\t\t\t\tthis.setState( CKEDITOR.TRISTATE_DISABLED );\n\t\t\t\t},\n\n\t\t\t\t// The automatic colorbox should represent the real color (http://dev.ckeditor.com/ticket/6010)\n\t\t\t\tonOpen: function() {\n\n\t\t\t\t\tvar selection = editor.getSelection(),\n\t\t\t\t\t\tblock = selection && selection.getStartElement(),\n\t\t\t\t\t\tpath = editor.elementPath( block ),\n\t\t\t\t\t\tautomaticColor;\n\n\t\t\t\t\tif ( !path )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Find the closest block element.\n\t\t\t\t\tblock = path.block || path.blockLimit || editor.document.getBody();\n\n\t\t\t\t\t// The background color might be transparent. In that case, look up the color in the DOM tree.\n\t\t\t\t\tdo {\n\t\t\t\t\t\tautomaticColor = block && block.getComputedStyle( type == 'back' ? 'background-color' : 'color' ) || 'transparent';\n\t\t\t\t\t}\n\t\t\t\t\twhile ( type == 'back' && automaticColor == 'transparent' && block && ( block = block.getParent() ) );\n\n\t\t\t\t\t// The box should never be transparent.\n\t\t\t\t\tif ( !automaticColor || automaticColor == 'transparent' )\n\t\t\t\t\t\tautomaticColor = '#ffffff';\n\n\t\t\t\t\tif ( config.colorButton_enableAutomatic !== false ) {\n\t\t\t\t\t\tthis._.panel._.iframe.getFrameDocument().getById( colorBoxId ).setStyle( 'background-color', automaticColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar range = selection && selection.getRanges()[ 0 ];\n\n\t\t\t\t\tif ( range ) {\n\t\t\t\t\t\tvar walker = new CKEDITOR.dom.walker( range ),\n\t\t\t\t\t\t\telement = range.collapsed ? range.startContainer : walker.next(),\n\t\t\t\t\t\t\tfinalColor = '',\n\t\t\t\t\t\t\tcurrentColor;\n\n\t\t\t\t\t\twhile ( element ) {\n\t\t\t\t\t\t\tif ( element.type === CKEDITOR.NODE_TEXT ) {\n\t\t\t\t\t\t\t\telement = element.getParent();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcurrentColor = normalizeColor( element.getComputedStyle( type == 'back' ? 'background-color' : 'color'  ) );\n\t\t\t\t\t\t\tfinalColor = finalColor || currentColor;\n\n\t\t\t\t\t\t\tif ( finalColor !== currentColor ) {\n\t\t\t\t\t\t\t\tfinalColor = '';\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telement = walker.next();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tselectColor( panelBlock, finalColor );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn automaticColor;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction renderColors( panel, type, colorBoxId ) {\n\t\t\tvar output = [],\n\t\t\t\tcolors = config.colorButton_colors.split( ',' ),\n\t\t\t\tcolorsPerRow = config.colorButton_colorsPerRow || 6,\n\t\t\t\t// Tells if we should include \"More Colors...\" button.\n\t\t\t\tmoreColorsEnabled = editor.plugins.colordialog && config.colorButton_enableMore !== false,\n\t\t\t\t// aria-setsize and aria-posinset attributes are used to indicate size of options, because\n\t\t\t\t// screen readers doesn't play nice with table, based layouts (http://dev.ckeditor.com/ticket/12097).\n\t\t\t\ttotal = colors.length + ( moreColorsEnabled ? 2 : 1 );\n\n\t\t\tvar clickFn = CKEDITOR.tools.addFunction( function applyColorStyle( color, type ) {\n\t\t\t\tfunction onColorDialogClose( evt ) {\n\t\t\t\t\tthis.removeListener( 'ok', onColorDialogClose );\n\t\t\t\t\tthis.removeListener( 'cancel', onColorDialogClose );\n\n\t\t\t\t\tevt.name == 'ok' && applyColorStyle( this.getContentElement( 'picker', 'selectedColor' ).getValue(), type );\n\t\t\t\t}\n\n\t\t\t\tif ( color == '?' ) {\n\t\t\t\t\teditor.openDialog( 'colordialog', function() {\n\t\t\t\t\t\tthis.on( 'ok', onColorDialogClose );\n\t\t\t\t\t\tthis.on( 'cancel', onColorDialogClose );\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\teditor.focus();\n\n\t\t\t\tpanel.hide();\n\n\t\t\t\teditor.fire( 'saveSnapshot' );\n\n\t\t\t\t// Clean up any conflicting style within the range.\n\t\t\t\teditor.removeStyle( new CKEDITOR.style( config[ 'colorButton_' + type + 'Style' ], { color: 'inherit' } ) );\n\n\t\t\t\tif ( color ) {\n\t\t\t\t\tvar colorStyle = config[ 'colorButton_' + type + 'Style' ];\n\n\t\t\t\t\tcolorStyle.childRule = type == 'back' ?\n\t\t\t\t\tfunction( element ) {\n\t\t\t\t\t\t// It's better to apply background color as the innermost style. (http://dev.ckeditor.com/ticket/3599)\n\t\t\t\t\t\t// Except for \"unstylable elements\". (http://dev.ckeditor.com/ticket/6103)\n\t\t\t\t\t\treturn isUnstylable( element );\n\t\t\t\t\t} : function( element ) {\n\t\t\t\t\t\t// Fore color style must be applied inside links instead of around it. (http://dev.ckeditor.com/ticket/4772,http://dev.ckeditor.com/ticket/6908)\n\t\t\t\t\t\treturn !( element.is( 'a' ) || element.getElementsByTag( 'a' ).count() ) || isUnstylable( element );\n\t\t\t\t\t};\n\n\t\t\t\t\teditor.applyStyle( new CKEDITOR.style( colorStyle, { color: color } ) );\n\t\t\t\t}\n\n\t\t\t\teditor.fire( 'saveSnapshot' );\n\t\t\t} );\n\n\t\t\tif ( config.colorButton_enableAutomatic !== false ) {\n\t\t\t\t// Render the \"Automatic\" button.\n\t\t\t\toutput.push( '<a class=\"cke_colorauto\" _cke_focus=1 hidefocus=true' +\n\t\t\t\t\t' title=\"', lang.auto, '\"' +\n\t\t\t\t\t' onclick=\"CKEDITOR.tools.callFunction(', clickFn, ',null,\\'', type, '\\');return false;\"' +\n\t\t\t\t\t' href=\"javascript:void(\\'', lang.auto, '\\')\"' +\n\t\t\t\t\t' role=\"option\" aria-posinset=\"1\" aria-setsize=\"', total, '\">' +\n\t\t\t\t\t\t'<table role=\"presentation\" cellspacing=0 cellpadding=0 width=\"100%\">' +\n\t\t\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t\t\t'<td colspan=\"' + colorsPerRow + '\" align=\"center\"><span class=\"cke_colorbox\" id=\"', colorBoxId, '\"></span>', lang.auto, '</td>' +\n\t\t\t\t\t\t\t'</tr>' +\n\t\t\t\t\t\t'</table>' +\n\t\t\t\t\t'</a>' );\n\t\t\t}\n\t\t\toutput.push( '<table role=\"presentation\" cellspacing=0 cellpadding=0 width=\"100%\">' );\n\n\t\t\t// Render the color boxes.\n\t\t\tfor ( var i = 0; i < colors.length; i++ ) {\n\t\t\t\tif ( ( i % colorsPerRow ) === 0 )\n\t\t\t\t\toutput.push( '</tr><tr>' );\n\n\t\t\t\tvar parts = colors[ i ].split( '/' ),\n\t\t\t\t\tcolorName = parts[ 0 ],\n\t\t\t\t\tcolorCode = parts[ 1 ] || colorName;\n\n\t\t\t\t// The data can be only a color code (without #) or colorName + color code\n\t\t\t\t// If only a color code is provided, then the colorName is the color with the hash\n\t\t\t\t// Convert the color from RGB to RRGGBB for better compatibility with IE and <font>. See http://dev.ckeditor.com/ticket/5676\n\t\t\t\tif ( !parts[ 1 ] )\n\t\t\t\t\tcolorName = '#' + colorName.replace( /^(.)(.)(.)$/, '$1$1$2$2$3$3' );\n\n\t\t\t\tvar colorLabel = editor.lang.colorbutton.colors[ colorCode ] || colorCode;\n\t\t\t\toutput.push( '<td>' +\n\t\t\t\t\t'<a class=\"cke_colorbox\" _cke_focus=1 hidefocus=true' +\n\t\t\t\t\t\t' title=\"', colorLabel, '\"' +\n\t\t\t\t\t\t' onclick=\"CKEDITOR.tools.callFunction(', clickFn, ',\\'', colorName, '\\',\\'', type, '\\'); return false;\"' +\n\t\t\t\t\t\t' href=\"javascript:void(\\'', colorLabel, '\\')\"' +\n\t\t\t\t\t\t' data-value=\"' + colorCode + '\"' +\n\t\t\t\t\t\t' role=\"option\" aria-posinset=\"', ( i + 2 ), '\" aria-setsize=\"', total, '\">' +\n\t\t\t\t\t\t'<span class=\"cke_colorbox\" style=\"background-color:#', colorCode, '\"></span>' +\n\t\t\t\t\t'</a>' +\n\t\t\t\t\t'</td>' );\n\t\t\t}\n\n\t\t\t// Render the \"More Colors\" button.\n\t\t\tif ( moreColorsEnabled ) {\n\t\t\t\toutput.push( '</tr>' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td colspan=\"' + colorsPerRow + '\" align=\"center\">' +\n\t\t\t\t\t\t\t'<a class=\"cke_colormore\" _cke_focus=1 hidefocus=true' +\n\t\t\t\t\t\t\t\t' title=\"', lang.more, '\"' +\n\t\t\t\t\t\t\t\t' onclick=\"CKEDITOR.tools.callFunction(', clickFn, ',\\'?\\',\\'', type, '\\');return false;\"' +\n\t\t\t\t\t\t\t\t' href=\"javascript:void(\\'', lang.more, '\\')\"', ' role=\"option\" aria-posinset=\"', total, '\" aria-setsize=\"', total, '\">', lang.more, '</a>' +\n\t\t\t\t\t\t'</td>' ); // tr is later in the code.\n\t\t\t}\n\n\t\t\toutput.push( '</tr></table>' );\n\n\t\t\treturn output.join( '' );\n\t\t}\n\n\t\tfunction isUnstylable( ele ) {\n\t\t\treturn ( ele.getAttribute( 'contentEditable' ) == 'false' ) || ele.getAttribute( 'data-nostyle' );\n\t\t}\n\n\t\t/*\n\t\t * Selects the specified color in the specified panel block.\n\t\t *\n\t\t * @private\n\t\t * @member CKEDITOR.plugins.colorbutton\n\t\t * @param {CKEDITOR.ui.panel.block} block\n\t\t * @param {String} color\n\t\t */\n\t\tfunction selectColor( block, color ) {\n\t\t\tvar items = block._.getItems();\n\n\t\t\tfor ( var i = 0; i < items.count(); i++ ) {\n\t\t\t\tvar item = items.getItem( i );\n\n\t\t\t\titem.removeAttribute( 'aria-selected' );\n\n\t\t\t\tif ( color && color == normalizeColor( item.getAttribute( 'data-value' ) ) ) {\n\t\t\t\t\titem.setAttribute( 'aria-selected', true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/*\n\t\t * Converts a CSS color value to an easily comparable form.\n\t\t *\n\t\t * @private\n\t\t * @member CKEDITOR.plugins.colorbutton\n\t\t * @param {String} color\n\t\t * @returns {String}\n\t\t */\n\t\tfunction normalizeColor( color ) {\n\t\t\treturn CKEDITOR.tools.convertRgbToHex( color || '' ).replace( /#/, '' ).toLowerCase();\n\t\t}\n\t}\n} );\n\n/**\n * Whether to enable the **More Colors** button in the color selectors.\n *\n * Read more in the [documentation](#!/guide/dev_colorbutton)\n * and see the [SDK sample](http://sdk.ckeditor.com/samples/colorbutton.html).\n *\n *\t\tconfig.colorButton_enableMore = false;\n *\n * @cfg {Boolean} [colorButton_enableMore=true]\n * @member CKEDITOR.config\n */\n\n/**\n * Defines the colors to be displayed in the color selectors. This is a string\n * containing hexadecimal notation for HTML colors, without the `'#'` prefix.\n *\n * **Since 3.3:** A color name may optionally be defined by prefixing the entries with\n * a name and the slash character. For example, `'FontColor1/FF9900'` will be\n * displayed as the color `#FF9900` in the selector, but will be output as `'FontColor1'`.\n *\n * **Since 4.6.2:** The default color palette has changed. It contains fewer colors in more\n * pastel shades than the previous one.\n *\n * Read more in the [documentation](#!/guide/dev_colorbutton)\n * and see the [SDK sample](http://sdk.ckeditor.com/samples/colorbutton.html).\n *\n *\t\t// Brazil colors only.\n *\t\tconfig.colorButton_colors = '00923E,F8C100,28166F';\n *\n *\t\tconfig.colorButton_colors = 'FontColor1/FF9900,FontColor2/0066CC,FontColor3/F00';\n *\n *\t\t// CKEditor color palette available before version 4.6.2.\n *\t\tconfig.colorButton_colors =\n *\t\t\t'000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,' +\n *\t\t\t'B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,' +\n *\t\t\t'F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,' +\n *\t\t\t'FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,' +\n *\t\t\t'FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF';\n *\n * @cfg {String} [colorButton_colors=see source]\n * @member CKEDITOR.config\n */\nCKEDITOR.config.colorButton_colors = '1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,' +\n\t'16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,' +\n\t'E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,' +\n\t'D35400,C0392B,BDC3C7,7F8C8D,999,000';\n\n/**\n * Stores the style definition that applies the text foreground color.\n *\n * Read more in the [documentation](#!/guide/dev_colorbutton)\n * and see the [SDK sample](http://sdk.ckeditor.com/samples/colorbutton.html).\n *\n *\t\t// This is actually the default value.\n *\t\tconfig.colorButton_foreStyle = {\n *\t\t\telement: 'span',\n *\t\t\tstyles: { color: '#(color)' }\n *\t\t};\n *\n * @cfg [colorButton_foreStyle=see source]\n * @member CKEDITOR.config\n */\nCKEDITOR.config.colorButton_foreStyle = {\n\telement: 'span',\n\tstyles: { 'color': '#(color)' },\n\toverrides: [ {\n\t\telement: 'font', attributes: { 'color': null }\n\t} ]\n};\n\n/**\n * Stores the style definition that applies the text background color.\n *\n * Read more in the [documentation](#!/guide/dev_colorbutton)\n * and see the [SDK sample](http://sdk.ckeditor.com/samples/colorbutton.html).\n *\n *\t\t// This is actually the default value.\n *\t\tconfig.colorButton_backStyle = {\n *\t\t\telement: 'span',\n *\t\t\tstyles: { 'background-color': '#(color)' }\n *\t\t};\n *\n * @cfg [colorButton_backStyle=see source]\n * @member CKEDITOR.config\n */\nCKEDITOR.config.colorButton_backStyle = {\n\telement: 'span',\n\tstyles: { 'background-color': '#(color)' }\n};\n\n/**\n * Whether to enable the **Automatic** button in the color selectors.\n *\n * Read more in the [documentation](#!/guide/dev_colorbutton)\n * and see the [SDK sample](http://sdk.ckeditor.com/samples/colorbutton.html).\n *\n *\t\tconfig.colorButton_enableAutomatic = false;\n *\n * @cfg {Boolean} [colorButton_enableAutomatic=true]\n * @member CKEDITOR.config\n */\n\n/**\n * Defines how many colors will be shown per row in the color selectors.\n *\n * Read more in the [documentation](#!/guide/dev_colorbutton)\n * and see the [SDK sample](http://sdk.ckeditor.com/samples/colorbutton.html).\n *\n *\t\tconfig.colorButton_colorsPerRow = 8;\n *\n * @since 4.6.2\n * @cfg {Number} [colorButton_colorsPerRow=6]\n * @member CKEDITOR.config\n */\n\n/**\n * Whether the plugin should convert `background` CSS properties with color only, to a `background-color` property,\n * allowing the [Color Button](http://ckeditor.com/addon/colorbutton) plugin to edit these styles.\n *\n *\t\tconfig.colorButton_normalizeBackground = false;\n *\n * @since 4.6.1\n * @cfg {Boolean} [colorButton_normalizeBackground=true]\n * @member CKEDITOR.config\n */\n"]}