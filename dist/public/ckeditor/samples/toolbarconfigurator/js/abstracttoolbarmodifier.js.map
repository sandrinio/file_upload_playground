{"version":3,"sources":["../../../../../../public/ckeditor/samples/toolbarconfigurator/js/abstracttoolbarmodifier.js"],"names":["Object","create","a","b","arguments","length","Error","TypeError","prototype","CKEDITOR","plugins","add","afterInit","addMode","c","dom","element","createFromHtml","ui","space","append","editable","detach","tools","override","apply","remove","setData","getData","fire","dataProcessor","toHtml","toDataFormat","keys","hasOwnProperty","toString","propertyIsEnumerable","split","e","d","g","f","call","push","cfg","hidden","editorId","fullToolbarEditor","ToolbarConfigurator","FullToolbarEditor","actualConfig","originalConfig","mainContainer","isEditableVisible","waitForReady","toolbarContainer","toolbarButtons","AbstractToolbarModifier","setConfig","_onInit","init","editorInstance","_createEditor","once","onRefresh","config","JSON","parse","stringify","toolbarGroups","toolbar","k","h","name","groups","slice","_createModifier","addClass","modifyContainer","getEditableArea","container","findOne","id","_hideEditable","lastEditableAreaHeight","getStyle","setStyle","_showEditable","_toggleEditable","_refreshEditor","destroy","getActualConfig","status","replace","on","extend","extendPluginsConfig","data","stop","instances","click","onClick","currentActive","_highlightGroup","hideUI","showUI","_createToolbar","_createToolbarBtn","createButton","text","inactive","cssClass","group","position","clickCallback","_fixGroups","type","getNextNumber","indexOf","addToolbarGroup","_fixSubgroups","totalBtns","ToolbarModifier","getTotalSubGroupButtonsNumber","stringifyJSONintoOneLine","addSpaces","noQuotesOnKey","singleQuotes","hide","show","extraPlugins"],"mappings":"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","file":"abstracttoolbarmodifier.js","sourcesContent":["﻿\"function\"!=typeof Object.create&&function(){var a=function(){};Object.create=function(b){if(1<arguments.length)throw Error(\"Second argument not supported\");if(null===b)throw Error(\"Cannot set a null [[Prototype]]\");if(\"object\"!=typeof b)throw TypeError(\"Argument must be an object\");a.prototype=b;return new a}}();\nCKEDITOR.plugins.add(\"toolbarconfiguratorarea\",{afterInit:function(a){a.addMode(\"wysiwyg\",function(b){var c=CKEDITOR.dom.element.createFromHtml('\\x3cdiv class\\x3d\"cke_wysiwyg_div cke_reset\" hidefocus\\x3d\"true\"\\x3e\\x3c/div\\x3e');a.ui.space(\"contents\").append(c);c=a.editable(c);c.detach=CKEDITOR.tools.override(c.detach,function(b){return function(){b.apply(this,arguments);this.remove()}});a.setData(a.getData(1),b);a.fire(\"contentDom\")});a.dataProcessor.toHtml=function(b){return b};a.dataProcessor.toDataFormat=\nfunction(b){return b}}});Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable(\"toString\"),c=\"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor\".split(\" \"),e=c.length;return function(d){if(\"object\"!==typeof d&&(\"function\"!==typeof d||null===d))throw new TypeError(\"Object.keys called on non-object\");var g=[],f;for(f in d)a.call(d,f)&&g.push(f);if(b)for(f=0;f<e;f++)a.call(d,c[f])&&g.push(c[f]);return g}}());\n(function(){function a(b,c){this.cfg=c||{};this.hidden=!1;this.editorId=b;this.fullToolbarEditor=new ToolbarConfigurator.FullToolbarEditor;this.actualConfig=this.originalConfig=this.mainContainer=null;this.isEditableVisible=this.waitForReady=!1;this.toolbarContainer=null;this.toolbarButtons=[]}ToolbarConfigurator.AbstractToolbarModifier=a;a.prototype.setConfig=function(b){this._onInit(void 0,b,!0)};a.prototype.init=function(b){var c=this;this.mainContainer=new CKEDITOR.dom.element(\"div\");if(null!==\nthis.fullToolbarEditor.editorInstance)throw\"Only one instance of ToolbarModifier is allowed\";this.editorInstance||this._createEditor(!1);this.editorInstance.once(\"loaded\",function(){c.fullToolbarEditor.init(function(){c._onInit(b);if(\"function\"==typeof c.onRefresh)c.onRefresh()},c.editorInstance.config)});return this.mainContainer};a.prototype._onInit=function(b,c){this.originalConfig=this.editorInstance.config;this.actualConfig=c?JSON.parse(c):JSON.parse(JSON.stringify(this.originalConfig));if(!this.actualConfig.toolbarGroups&&\n!this.actualConfig.toolbar){for(var a=this.actualConfig,d=this.editorInstance.toolbar,g=[],f=d.length,k=0;k<f;k++){var h=d[k];\"string\"==typeof h?g.push(h):g.push({name:h.name,groups:h.groups?h.groups.slice():[]})}a.toolbarGroups=g}\"function\"===typeof b&&b(this.mainContainer)};a.prototype._createModifier=function(){this.mainContainer.addClass(\"unselectable\");this.modifyContainer&&this.modifyContainer.remove();this.modifyContainer=new CKEDITOR.dom.element(\"div\");this.modifyContainer.addClass(\"toolbarModifier\");\nthis.mainContainer.append(this.modifyContainer);return this.mainContainer};a.prototype.getEditableArea=function(){return this.editorInstance.container.findOne(\"#\"+this.editorInstance.id+\"_contents\")};a.prototype._hideEditable=function(){var b=this.getEditableArea();this.isEditableVisible=!1;this.lastEditableAreaHeight=b.getStyle(\"height\");b.setStyle(\"height\",\"0\")};a.prototype._showEditable=function(){this.isEditableVisible=!0;this.getEditableArea().setStyle(\"height\",this.lastEditableAreaHeight||\"auto\")};\na.prototype._toggleEditable=function(){this.isEditableVisible?this._hideEditable():this._showEditable()};a.prototype._refreshEditor=function(){function b(){c.editorInstance.destroy();c._createEditor(!0,c.getActualConfig());c.waitForReady=!1}var c=this,a=this.editorInstance.status;this.waitForReady||(\"unloaded\"==a||\"loaded\"==a?(this.waitForReady=!0,this.editorInstance.once(\"instanceReady\",function(){b()},this)):b())};a.prototype._createEditor=function(b,c){function e(){}var d=this;this.editorInstance=\nCKEDITOR.replace(this.editorId);this.editorInstance.on(\"configLoaded\",function(){var b=d.editorInstance.config;c&&CKEDITOR.tools.extend(b,c,!0);a.extendPluginsConfig(b)});this.editorInstance.on(\"uiSpace\",function(b){\"top\"!=b.data.space&&b.stop()},null,null,-999);this.editorInstance.once(\"loaded\",function(){var c=d.editorInstance.ui.instances,a;for(a in c)c[a]&&(c[a].click=e,c[a].onClick=e);d.isEditableVisible||d._hideEditable();d.currentActive&&d.currentActive.name&&d._highlightGroup(d.currentActive.name);\nd.hidden?d.hideUI():d.showUI();if(b&&\"function\"===typeof d.onRefresh)d.onRefresh()})};a.prototype.getActualConfig=function(){return JSON.parse(JSON.stringify(this.actualConfig))};a.prototype._createToolbar=function(){if(this.toolbarButtons.length){this.toolbarContainer=new CKEDITOR.dom.element(\"div\");this.toolbarContainer.addClass(\"toolbar\");for(var b=this.toolbarButtons.length,c=0;c<b;c+=1)this._createToolbarBtn(this.toolbarButtons[c])}};a.prototype._createToolbarBtn=function(b){var c=ToolbarConfigurator.FullToolbarEditor.createButton(\"string\"===\ntypeof b.text?b.text:b.text.inactive,b.cssClass);this.toolbarContainer.append(c);c.data(\"group\",b.group);c.addClass(b.position);c.on(\"click\",function(){b.clickCallback.call(this,c,b)},this);return c};a.prototype._fixGroups=function(b){b=b.toolbarGroups||[];for(var c=b.length,a=0;a<c;a+=1){var d=b[a];\"/\"==d?(d=b[a]={},d.type=\"separator\",d.name=\"separator\"+CKEDITOR.tools.getNextNumber()):(d.groups=d.groups||[],-1==CKEDITOR.tools.indexOf(d.groups,d.name)&&(this.editorInstance.ui.addToolbarGroup(d.name,\nd.groups[d.groups.length-1],d.name),d.groups.push(d.name)),this._fixSubgroups(d))}};a.prototype._fixSubgroups=function(b){b=b.groups;for(var c=b.length,a=0;a<c;a+=1){var d=b[a];b[a]={name:d,totalBtns:ToolbarConfigurator.ToolbarModifier.getTotalSubGroupButtonsNumber(d,this.fullToolbarEditor)}}};a.stringifyJSONintoOneLine=function(b,a){a=a||{};var e=JSON.stringify(b,null,\"\"),e=e.replace(/\\n/g,\"\");a.addSpaces&&(e=e.replace(/(\\{|:|,|\\[|\\])/g,function(a){return a+\" \"}),e=e.replace(/(\\])/g,function(a){return\" \"+\na}));a.noQuotesOnKey&&(e=e.replace(/\"(\\w*)\":/g,function(a,b){return b+\":\"}));a.singleQuotes&&(e=e.replace(/\\\"/g,\"'\"));return e};a.prototype.hideUI=function(){this.hidden=!0;this.mainContainer.hide();this.editorInstance.container&&this.editorInstance.container.hide()};a.prototype.showUI=function(){this.hidden=!1;this.mainContainer.show();this.editorInstance.container&&this.editorInstance.container.show()};a.extendPluginsConfig=function(a){var c=a.extraPlugins;a.extraPlugins=(c?c+\",\":\"\")+\"toolbarconfiguratorarea\"}})();"]}