{"version":3,"sources":["../../../../../../public/ckeditor/samples/toolbarconfigurator/js/toolbarmodifier.js"],"names":["d","a","b","l","call","actualConfig","originalConfig","removedButtons","emptyVisible","state","toolbarButtons","text","active","inactive","group","position","cssClass","clickCallback","hasClass","_toggleVisibilityEmptyElements","setText","_addSeparator","configContainer","findOne","$","select","getValue","evaluateToolbarGroupsConfig","setConfig","alert","_showConfigurationTool","showToolbarBtnsByGroupName","_showConfig","cachedActiveElement","ToolbarConfigurator","AbstractToolbarModifier","ToolbarModifier","prototype","Object","create","getActualConfig","toolbarGroups","length","c","parseGroupToConfigValue","_onInit","removeButtons","split","fullToolbarEditor","getFullToolbarGroupsConfig","_fixGroups","_calculateTotalBtns","_createModifier","_refreshMoveBtnsAvalibility","_refreshBtnTabIndexes","mainContainer","addClass","modifyContainer","removeClass","e","cfg","trimEmptyGroups","f","g","m","h","push","k","groups","getTotalSubGroupButtonsNumber","splice","stringifyJSONintoOneLine","addSpaces","noQuotesOnKey","singleQuotes","join","setHtml","_highlightGroup","data","_toolbarConfigToListString","find","on","_dehighlightActiveToolGroup","count","getItem","CKEDITOR","document","keyCode","dom","element","activeElement","getAscendant","click","target","srcElement","getGroupOrSeparatorLiAncestor","HTMLInputElement","_handleCheckboxClicked","HTMLButtonElement","preventDefault","returnValue","_handleAnchorClicked","action","_setActiveElement","focus","toolbarContainer","_createToolbar","insertBefore","getChildren","append","type","totalBtns","name","HTMLLIElement","getFirstAncestor","currentActive","elem","getActiveToolGroup","editorInstance","container","getFirstEnabledButtonInGroup","getGroupIndex","getFirstEnabledButtonInSubgroup","buttonsByGroup","isButtonRemoved","checked","_removeButtonFromRemoved","_addButtonToRemoved","getPrevious","getNext","remove","_removeSeparator","_moveGroup","_moveSubgroup","getChild","insertAfter","getParent","_disableElementsInList","setAttribute","getFirst","getLast","_determineSeparatorToAddIndex","createSeparatorLiteral","createFromHtml","getToolbarSeparatorString","_refreshEditor","tools","indexOf","getIndex","_moveElement","getFirstElementIndexWith","moveTo","getTotalGroupButtonsNumber","getNextNumber","_getToolbarGroupString","getToolbarHeaderString","getToolbarElementPreString","_getToolbarSubgroupString","getParents","getButtonString","_getConfigButtonName","ui","items","label","getOuterHtml","eval","JSON","stringify"],"mappings":"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","file":"toolbarmodifier.js","sourcesContent":["﻿(function(){function d(a,b){l.call(this,a,b);this.actualConfig=this.originalConfig=this.removedButtons=null;this.emptyVisible=!1;this.state=\"edit\";this.toolbarButtons=[{text:{active:\"Hide empty toolbar groups\",inactive:\"Show empty toolbar groups\"},group:\"edit\",position:\"left\",cssClass:\"button-a-soft\",clickCallback:function(a,b){a[a.hasClass(\"button-a-background\")?\"removeClass\":\"addClass\"](\"button-a-background\");this._toggleVisibilityEmptyElements();this.emptyVisible?a.setText(b.text.active):a.setText(b.text.inactive)}},\n{text:\"Add row separator\",group:\"edit\",position:\"left\",cssClass:\"button-a-soft\",clickCallback:function(){this._addSeparator()}},{text:\"Select config\",group:\"config\",position:\"left\",cssClass:\"button-a-soft\",clickCallback:function(){this.configContainer.findOne(\"textarea\").$.select()}},{text:\"Back to configurator\",group:\"config\",position:\"right\",cssClass:\"button-a-background\",clickCallback:function(){if(\"paste\"===this.state){var a=this.configContainer.findOne(\"textarea\").getValue();(a=d.evaluateToolbarGroupsConfig(a))?\nthis.setConfig(a):alert(\"Your pasted config is wrong.\")}this.state=\"edit\";this._showConfigurationTool();this.showToolbarBtnsByGroupName(this.state)}},{text:'Get toolbar \\x3cspan class\\x3d\"highlight\"\\x3econfig\\x3c/span\\x3e',group:\"edit\",position:\"right\",cssClass:\"button-a-background icon-pos-left icon-download\",clickCallback:function(){this.state=\"config\";this._showConfig();this.showToolbarBtnsByGroupName(this.state)}}];this.cachedActiveElement=null}var l=ToolbarConfigurator.AbstractToolbarModifier;\nToolbarConfigurator.ToolbarModifier=d;d.prototype=Object.create(ToolbarConfigurator.AbstractToolbarModifier.prototype);d.prototype.getActualConfig=function(){var a=l.prototype.getActualConfig.call(this);if(a.toolbarGroups)for(var b=a.toolbarGroups.length,c=0;c<b;c+=1)a.toolbarGroups[c]=d.parseGroupToConfigValue(a.toolbarGroups[c]);return a};d.prototype._onInit=function(a,b,c){c=!0===c;l.prototype._onInit.call(this,void 0,b);this.removedButtons=[];c?this.removedButtons=this.actualConfig.removeButtons?\nthis.actualConfig.removeButtons.split(\",\"):[]:\"removeButtons\"in this.originalConfig?this.removedButtons=this.originalConfig.removeButtons?this.originalConfig.removeButtons.split(\",\"):[]:(this.originalConfig.removeButtons=\"\",this.removedButtons=[]);this.actualConfig.toolbarGroups||(this.actualConfig.toolbarGroups=this.fullToolbarEditor.getFullToolbarGroupsConfig());this._fixGroups(this.actualConfig);this._calculateTotalBtns();this._createModifier();this._refreshMoveBtnsAvalibility();this._refreshBtnTabIndexes();\n\"function\"===typeof a&&a(this.mainContainer)};d.prototype._showConfigurationTool=function(){this.configContainer.addClass(\"hidden\");this.modifyContainer.removeClass(\"hidden\")};d.prototype._showConfig=function(){var a=this.getActualConfig(),b,c;if(a.toolbarGroups){b=a.toolbarGroups;for(var e=this.cfg.trimEmptyGroups,f=[],g=b.length,m=0;m<g;m++){var h=b[m];if(\"/\"===h)f.push(\"'/'\");else{if(e)for(var k=h.groups.length;k--;)0===d.getTotalSubGroupButtonsNumber(h.groups[k],this.fullToolbarEditor)&&h.groups.splice(k,\n1);e&&0===h.groups.length||f.push(l.stringifyJSONintoOneLine(h,{addSpaces:!0,noQuotesOnKey:!0,singleQuotes:!0}))}}b=\"\\n\\t\\t\"+f.join(\",\\n\\t\\t\")}a.removeButtons&&(c=a.removeButtons);a=['\\x3ctextarea class\\x3d\"configCode\" readonly\\x3eCKEDITOR.editorConfig \\x3d function( config ) {\\n',b?\"\\tconfig.toolbarGroups \\x3d [\"+b+\"\\n\\t];\":\"\",c?\"\\n\\n\":\"\",c?\"\\tconfig.removeButtons \\x3d '\"+c+\"';\":\"\",\"\\n};\\x3c/textarea\\x3e\"].join(\"\");this.modifyContainer.addClass(\"hidden\");this.configContainer.removeClass(\"hidden\");\nthis.configContainer.setHtml(a)};d.prototype._toggleVisibilityEmptyElements=function(){this.modifyContainer.hasClass(\"empty-visible\")?(this.modifyContainer.removeClass(\"empty-visible\"),this.emptyVisible=!1):(this.modifyContainer.addClass(\"empty-visible\"),this.emptyVisible=!0);this._refreshMoveBtnsAvalibility()};d.prototype._createModifier=function(){function a(){b._highlightGroup(this.data(\"name\"))}var b=this;l.prototype._createModifier.call(this);this.modifyContainer.setHtml(this._toolbarConfigToListString());\nvar c=this.modifyContainer.find('li[data-type\\x3d\"group\"]');this.modifyContainer.on(\"mouseleave\",function(){this._dehighlightActiveToolGroup()},this);for(var e=c.count(),f=0;f<e;f+=1)c.getItem(f).on(\"mouseenter\",a);CKEDITOR.document.on(\"keypress\",function(a){a=a.data.$.keyCode;a=32===a||13===a;var c=new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);c.getAscendant(function(a){return a.$===b.mainContainer.$})&&a&&\"button\"===c.data(\"type\")&&c.findOne(\"input\").$.click()});this.modifyContainer.on(\"click\",\nfunction(a){var c=a.data.$,e=new CKEDITOR.dom.element(c.target||c.srcElement);if(a=d.getGroupOrSeparatorLiAncestor(e)){b.cachedActiveElement=document.activeElement;if(e.$ instanceof HTMLInputElement)b._handleCheckboxClicked(e);else if(e.$ instanceof HTMLButtonElement&&(c.preventDefault?c.preventDefault():c.returnValue=!1,(c=b._handleAnchorClicked(e.$))&&\"remove\"==c.action))return;c=a.data(\"type\");a=a.data(\"name\");b._setActiveElement(c,a);b.cachedActiveElement&&b.cachedActiveElement.focus()}});this.toolbarContainer||\n(this._createToolbar(),this.toolbarContainer.insertBefore(this.mainContainer.getChildren().getItem(0)));this.showToolbarBtnsByGroupName(\"edit\");this.configContainer||(this.configContainer=new CKEDITOR.dom.element(\"div\"),this.configContainer.addClass(\"configContainer\"),this.configContainer.addClass(\"hidden\"),this.mainContainer.append(this.configContainer));return this.mainContainer};d.prototype.showToolbarBtnsByGroupName=function(a){if(this.toolbarContainer)for(var b=this.toolbarContainer.find(\"button\"),\nc=b.count(),e=0;e<c;e+=1){var d=b.getItem(e);d.data(\"group\")==a?d.removeClass(\"hidden\"):d.addClass(\"hidden\")}};d.parseGroupToConfigValue=function(a){if(\"separator\"==a.type)return\"/\";var b=a.groups,c=b.length;delete a.totalBtns;for(var e=0;e<c;e+=1)b[e]=b[e].name;return a};d.getGroupOrSeparatorLiAncestor=function(a){return a.$ instanceof HTMLLIElement&&\"group\"==a.data(\"type\")?a:d.getFirstAncestor(a,function(a){a=a.data(\"type\");return\"group\"==a||\"separator\"==a})};d.prototype._setActiveElement=function(a,\nb){this.currentActive&&this.currentActive.elem.removeClass(\"active\");if(null===a)this._dehighlightActiveToolGroup(),this.currentActive=null;else{var c=this.mainContainer.findOne('ul[data-type\\x3dtable-body] li[data-type\\x3d\"'+a+'\"][data-name\\x3d\"'+b+'\"]');c.addClass(\"active\");this.currentActive={type:a,name:b,elem:c};\"group\"==a&&this._highlightGroup(b);\"separator\"==a&&this._dehighlightActiveToolGroup()}};d.prototype.getActiveToolGroup=function(){return this.editorInstance.container?this.editorInstance.container.findOne(\".cke_toolgroup.active, .cke_toolbar.active\"):\nnull};d.prototype._dehighlightActiveToolGroup=function(){var a=this.getActiveToolGroup();a&&a.removeClass(\"active\");this.editorInstance.container&&this.editorInstance.container.removeClass(\"some-toolbar-active\")};d.prototype._highlightGroup=function(a){this.editorInstance.container&&(a=this.getFirstEnabledButtonInGroup(a),a=this.editorInstance.container.findOne(\".cke_button__\"+a+\", .cke_combo__\"+a),this._dehighlightActiveToolGroup(),this.editorInstance.container&&this.editorInstance.container.addClass(\"some-toolbar-active\"),\na&&(a=d.getFirstAncestor(a,function(a){return a.hasClass(\"cke_toolbar\")}))&&a.addClass(\"active\"))};d.prototype.getFirstEnabledButtonInGroup=function(a){var b=this.actualConfig.toolbarGroups;a=this.getGroupIndex(a);b=b[a];if(-1===a)return null;a=b.groups?b.groups.length:0;for(var c=0;c<a;c+=1){var e=this.getFirstEnabledButtonInSubgroup(b.groups[c].name);if(e)return e}return null};d.prototype.getFirstEnabledButtonInSubgroup=function(a){for(var b=(a=this.fullToolbarEditor.buttonsByGroup[a])?a.length:\n0,c=0;c<b;c+=1){var e=a[c].name;if(!this.isButtonRemoved(e))return e}return null};d.prototype._handleCheckboxClicked=function(a){var b=a.getAscendant(\"li\").data(\"name\");a.$.checked?this._removeButtonFromRemoved(b):this._addButtonToRemoved(b)};d.prototype._handleAnchorClicked=function(a){a=new CKEDITOR.dom.element(a);var b=a.getAscendant(\"li\"),c=b.getAscendant(\"ul\"),e=b.data(\"type\"),d=b.data(\"name\"),g=a.data(\"direction\"),m=\"up\"===g?b.getPrevious():b.getNext(),h;if(a.hasClass(\"disabled\"))return null;\nif(a.hasClass(\"remove\"))return b.remove(),this._removeSeparator(b.data(\"name\")),this._setActiveElement(null),{action:\"remove\"};if(!a.hasClass(\"move\")||!m)return{action:null};if(\"group\"===e||\"separator\"===e)h=this._moveGroup(g,d);\"subgroup\"===e&&(h=b.getAscendant(\"li\").data(\"name\"),h=this._moveSubgroup(g,h,d));\"up\"===g&&b.insertBefore(c.getChild(h));\"down\"===g&&b.insertAfter(c.getChild(h));for(var k;b=\"up\"===g?b.getPrevious():b.getNext();)if(this.emptyVisible||!b.hasClass(\"empty\")){k=b;break}k||(k=\n'[data-direction\\x3d\"'+(\"up\"===g?\"down\":\"up\")+'\"]',this.cachedActiveElement=a.getParent().findOne(k));this._refreshMoveBtnsAvalibility();this._refreshBtnTabIndexes();return{action:\"move\"}};d.prototype._refreshMoveBtnsAvalibility=function(){function a(a){var c=a.count();for(d=0;d<c;d+=1)b._disableElementsInList(a.getItem(d))}for(var b=this,c=this.mainContainer.find(\"ul[data-type\\x3dtable-body] li \\x3e p \\x3e span \\x3e button.move.disabled\"),e=c.count(),d=0;d<e;d+=1)c.getItem(d).removeClass(\"disabled\");\na(this.mainContainer.find(\"ul[data-type\\x3dtable-body]\"));a(this.mainContainer.find(\"ul[data-type\\x3dtable-body] \\x3e li \\x3e ul\"))};d.prototype._refreshBtnTabIndexes=function(){for(var a=this.mainContainer.find('[data-tab\\x3d\"true\"]'),b=a.count(),c=0;c<b;c++){var e=a.getItem(c),d=e.hasClass(\"disabled\");e.setAttribute(\"tabindex\",d?-1:c)}};d.prototype._disableElementsInList=function(a){function b(a){return!a.hasClass(\"empty\")}if(a.getChildren().count()){var c;this.emptyVisible?(c=a.getFirst(),a=a.getLast()):\n(c=a.getFirst(b),a=a.getLast(b));if(c)var e=c.findOne('p button[data-direction\\x3d\"up\"]');if(a)var d=a.findOne('p button[data-direction\\x3d\"down\"]');e&&(e.addClass(\"disabled\"),e.setAttribute(\"tabindex\",\"-1\"));d&&(d.addClass(\"disabled\"),d.setAttribute(\"tabindex\",\"-1\"))}};d.prototype.getGroupIndex=function(a){for(var b=this.actualConfig.toolbarGroups,c=b.length,d=0;d<c;d+=1)if(b[d].name===a)return d;return-1};d.prototype._addSeparator=function(){var a=this._determineSeparatorToAddIndex(),b=d.createSeparatorLiteral(),\nc=CKEDITOR.dom.element.createFromHtml(d.getToolbarSeparatorString(b));this.actualConfig.toolbarGroups.splice(a,0,b);c.insertBefore(this.modifyContainer.findOne(\"ul[data-type\\x3dtable-body]\").getChild(a));this._setActiveElement(\"separator\",b.name);this._refreshMoveBtnsAvalibility();this._refreshBtnTabIndexes();this._refreshEditor()};d.prototype._removeSeparator=function(a){var b=CKEDITOR.tools.indexOf(this.actualConfig.toolbarGroups,function(b){return\"separator\"==b.type&&b.name==a});this.actualConfig.toolbarGroups.splice(b,\n1);this._refreshMoveBtnsAvalibility();this._refreshBtnTabIndexes();this._refreshEditor()};d.prototype._determineSeparatorToAddIndex=function(){return this.currentActive?(\"group\"==this.currentActive.elem.data(\"type\")||\"separator\"==this.currentActive.elem.data(\"type\")?this.currentActive.elem:this.currentActive.elem.getAscendant(\"li\")).getIndex():0};d.prototype._moveElement=function(a,b,c){function e(a){return a.totalBtns||\"separator\"==a.type}c=this.emptyVisible?\"down\"==c?b+1:b-1:d.getFirstElementIndexWith(a,\nb,c,e);return d.moveTo(c-b,a,b)};d.prototype._moveGroup=function(a,b){var c=this.getGroupIndex(b),c=this._moveElement(this.actualConfig.toolbarGroups,c,a);this._refreshMoveBtnsAvalibility();this._refreshBtnTabIndexes();this._refreshEditor();return c};d.prototype._moveSubgroup=function(a,b,c){b=this.getGroupIndex(b);b=this.actualConfig.toolbarGroups[b];var d=CKEDITOR.tools.indexOf(b.groups,function(a){return a.name==c});a=this._moveElement(b.groups,d,a);this._refreshEditor();return a};d.prototype._calculateTotalBtns=\nfunction(){for(var a=this.actualConfig.toolbarGroups,b=a.length;b--;){var c=a[b],e=d.getTotalGroupButtonsNumber(c,this.fullToolbarEditor);\"separator\"!=c.type&&(c.totalBtns=e)}};d.prototype._addButtonToRemoved=function(a){if(-1!=CKEDITOR.tools.indexOf(this.removedButtons,a))throw\"Button already added to removed\";this.removedButtons.push(a);this.actualConfig.removeButtons=this.removedButtons.join(\",\");this._refreshEditor()};d.prototype._removeButtonFromRemoved=function(a){a=CKEDITOR.tools.indexOf(this.removedButtons,\na);if(-1===a)throw\"Trying to remove button from removed, but not found\";this.removedButtons.splice(a,1);this.actualConfig.removeButtons=this.removedButtons.join(\",\");this._refreshEditor()};d.parseGroupToConfigValue=function(a){if(\"separator\"==a.type)return\"/\";var b=a.groups,c=b.length;delete a.totalBtns;for(var d=0;d<c;d+=1)b[d]=b[d].name;return a};d.getGroupOrSeparatorLiAncestor=function(a){return a.$ instanceof HTMLLIElement&&\"group\"==a.data(\"type\")?a:d.getFirstAncestor(a,function(a){a=a.data(\"type\");\nreturn\"group\"==a||\"separator\"==a})};d.createSeparatorLiteral=function(){return{type:\"separator\",name:\"separator\"+CKEDITOR.tools.getNextNumber()}};d.prototype._toolbarConfigToListString=function(){for(var a=this.actualConfig.toolbarGroups||[],b='\\x3cul data-type\\x3d\"table-body\"\\x3e',c=a.length,e=0;e<c;e+=1)var f=a[e],b=\"separator\"===f.type?b+d.getToolbarSeparatorString(f):b+this._getToolbarGroupString(f);b+=\"\\x3c/ul\\x3e\";return d.getToolbarHeaderString()+b};d.prototype._getToolbarGroupString=function(a){var b=\na.groups,c;c=\"\"+['\\x3cli data-type\\x3d\"group\" data-name\\x3d\"',a.name,'\" ',a.totalBtns?\"\":'class\\x3d\"empty\"',\"\\x3e\"].join(\"\");c+=d.getToolbarElementPreString(a)+\"\\x3cul\\x3e\";a=b.length;for(var e=0;e<a;e+=1){var f=b[e];c+=this._getToolbarSubgroupString(f,this.fullToolbarEditor.buttonsByGroup[f.name])}return c+\"\\x3c/ul\\x3e\\x3c/li\\x3e\"};d.getToolbarSeparatorString=function(a){return['\\x3cli data-type\\x3d\"',a.type,'\" data-name\\x3d\"',a.name,'\"\\x3e',d.getToolbarElementPreString(\"row separator\"),\"\\x3c/li\\x3e\"].join(\"\")};\nd.getToolbarHeaderString=function(){return'\\x3cul data-type\\x3d\"table-header\"\\x3e\\x3cli data-type\\x3d\"header\"\\x3e\\x3cp\\x3eToolbars\\x3c/p\\x3e\\x3cul\\x3e\\x3cli\\x3e\\x3cp\\x3eToolbar groups\\x3c/p\\x3e\\x3cp\\x3eToolbar group items\\x3c/p\\x3e\\x3c/li\\x3e\\x3c/ul\\x3e\\x3c/li\\x3e\\x3c/ul\\x3e'};d.getFirstAncestor=function(a,b){for(var c=a.getParents(),d=c.length;d--;)if(b(c[d]))return c[d];return null};d.getFirstElementIndexWith=function(a,b,c,d){for(;\"up\"===c?b--:++b<a.length;)if(d(a[b]))return b;return-1};d.moveTo=\nfunction(a,b,c){var d;-1!==c&&(d=b.splice(c,1)[0]);a=c+a;b.splice(a,0,d);return a};d.getTotalSubGroupButtonsNumber=function(a,b){var c=b.buttonsByGroup[\"string\"==typeof a?a:a.name];return c?c.length:0};d.getTotalGroupButtonsNumber=function(a,b){for(var c=0,e=a.groups,f=e?e.length:0,g=0;g<f;g+=1)c+=d.getTotalSubGroupButtonsNumber(e[g],b);return c};d.prototype._getToolbarSubgroupString=function(a,b){var c;c=\"\"+['\\x3cli data-type\\x3d\"subgroup\" data-name\\x3d\"',a.name,'\" ',a.totalBtns?\"\":'class\\x3d\"empty\" ',\n\"\\x3e\"].join(\"\");c+=d.getToolbarElementPreString(a.name);c+=\"\\x3cul\\x3e\";for(var e=b?b.length:0,f=0;f<e;f+=1)c+=this.getButtonString(b[f]);return c+=\"\\x3c/ul\\x3e\\x3c/li\\x3e\"};d.prototype._getConfigButtonName=function(a){var b=this.fullToolbarEditor.editorInstance.ui.items,c;for(c in b)if(b[c].name==a)return c;return null};d.prototype.isButtonRemoved=function(a){return-1!=CKEDITOR.tools.indexOf(this.removedButtons,this._getConfigButtonName(a))};d.prototype.getButtonString=function(a){var b=this.isButtonRemoved(a.name)?\n\"\":'checked\\x3d\"checked\"';return['\\x3cli data-tab\\x3d\"true\" data-type\\x3d\"button\" data-name\\x3d\"',this._getConfigButtonName(a.name),'\"\\x3e\\x3clabel title\\x3d\"',a.label,'\" \\x3e\\x3cinput tabindex\\x3d\"-1\"type\\x3d\"checkbox\"',b,\"/\\x3e\",a.$.getOuterHtml(),\"\\x3c/label\\x3e\\x3c/li\\x3e\"].join(\"\")};d.getToolbarElementPreString=function(a){a=a.name?a.name:a;return['\\x3cp\\x3e\\x3cspan\\x3e\\x3cbutton title\\x3d\"Move element upward\" data-tab\\x3d\"true\" data-direction\\x3d\"up\" class\\x3d\"move icon-up-big\"\\x3e\\x3c/button\\x3e\\x3cbutton title\\x3d\"Move element downward\" data-tab\\x3d\"true\" data-direction\\x3d\"down\" class\\x3d\"move icon-down-big\"\\x3e\\x3c/button\\x3e',\n\"row separator\"==a?'\\x3cbutton title\\x3d\"Remove element\" data-tab\\x3d\"true\" class\\x3d\"remove icon-trash\"\\x3e\\x3c/button\\x3e':\"\",a,\"\\x3c/span\\x3e\\x3c/p\\x3e\"].join(\"\")};d.evaluateToolbarGroupsConfig=function(a){return a=function(a){var c={},d;try{d=eval(\"(\"+a+\")\")}catch(f){try{d=eval(a)}catch(g){return null}}return c.toolbarGroups&&\"number\"===typeof c.toolbarGroups.length?JSON.stringify(c):d&&\"number\"===typeof d.length?JSON.stringify({toolbarGroups:d}):d&&d.toolbarGroups?JSON.stringify(d):null}(a)};\nreturn d})();"]}