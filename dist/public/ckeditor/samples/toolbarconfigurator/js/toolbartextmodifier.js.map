{"version":3,"sources":["../../../../../../public/ckeditor/samples/toolbarconfigurator/js/toolbartextmodifier.js"],"names":["e","a","l","call","hintContainer","codeContainer","ToolbarConfigurator","AbstractToolbarModifier","g","FullToolbarEditor","ToolbarTextModifier","prototype","Object","create","_onInit","d","_createModifier","actualConfig","mainContainer","b","c","charsBetween","k","getUnusedButtonsArray","toolbar","getCursor","CodeMirror","Pos","line","ch","length","h","getTokenAt","start","string","f","from","to","list","_handlers","cur","tok","charAt","getRange","split","reverse","join","replace","match","endChar","setTimeout","state","completionActive","showHint","hintsClass","completeSingle","Pass","_createToolbar","toolbarContainer","append","_setupActualConfig","CKEDITOR","tools","isArray","map","stringifyJSONintoOneLine","addSpaces","noQuotesOnKey","singleQuotes","dom","element","addClass","modifyContainer","$","mode","name","json","lineNumbers","lineWrapping","viewportMargin","Infinity","value","smartIndent","indentWithTabs","indentUnit","tabSize","theme","extraKeys","Left","Right","Backspace","Delete","on","replaceSelection","getValue","_evaluateValue","_fillHintByUnusedElements","_refreshEditor","removeClass","insertBefore","groupButtonNamesByGroup","buttons","refresh","setHtml","getToolbarGroupByButtonName","fullToolbarEditor","buttonNamesByGroup","mapToolbarCfgToElementsList","keys","editorInstance","ui","items","filter","toLowerCase","indexOf","sort","JSON","parse","stringify","push","concat","config","toolbarGroups","getFullToolbarGroupsConfig","_fixGroups","_mapToolbarGroupsToToolbar","removeButtons","removedBtns","_mapToolbarSubgroup","type","splice","groups","buttonsByGroup","_mapButtonsToButtonsNames","pop","getCamelCasedButtonName","Function","editorConfig","mapToolbarToToolbarGroups","slice","m","p","n","used","origin"],"mappings":"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","file":"toolbartextmodifier.js","sourcesContent":["﻿(function(){function e(a){l.call(this,a);this.hintContainer=this.codeContainer=null}var l=ToolbarConfigurator.AbstractToolbarModifier,g=ToolbarConfigurator.FullToolbarEditor;ToolbarConfigurator.ToolbarTextModifier=e;e.prototype=Object.create(l.prototype);e.prototype._onInit=function(a,d){l.prototype._onInit.call(this,void 0,d);this._createModifier(d?this.actualConfig:void 0);\"function\"===typeof a&&a(this.mainContainer)};e.prototype._createModifier=function(a){function d(a){var b=c(a);if(null!==b.charsBetween){var d=\nk.getUnusedButtonsArray(k.actualConfig.toolbar,!0,b.charsBetween),e=a.getCursor(),b=CodeMirror.Pos(e.line,e.ch-b.charsBetween.length),h=a.getTokenAt(e);\"{\"===a.getTokenAt({line:e.line,ch:h.start}).string&&(d=[\"name\"]);if(0!==d.length)return new f(b,e,d)}}function f(a,c,b){this.from=a;this.to=c;this.list=b;this._handlers=[]}function c(a,c){var b={};b.cur=a.getCursor();b.tok=a.getTokenAt(b.cur);b[\"char\"]=c||b.tok.string.charAt(b.tok.string.length-1);var d=a.getRange(CodeMirror.Pos(b.cur.line,0),b.cur).split(\"\").reverse().join(\"\"),\nd=d.replace(/(['|\"]\\w*['|\"])/g,\"\");b.charsBetween=d.match(/(^\\w*)(['|\"])/);b.charsBetween&&(b.endChar=b.charsBetween[2],b.charsBetween=b.charsBetween[1].split(\"\").reverse().join(\"\"));return b}function b(a){setTimeout(function(){a.state.completionActive||CodeMirror.showHint(a,d,{hintsClass:\"toolbar-modifier\",completeSingle:!1})},100);return CodeMirror.Pass}var k=this;this._createToolbar();this.toolbarContainer&&this.mainContainer.append(this.toolbarContainer);l.prototype._createModifier.call(this);\nthis._setupActualConfig(a);a=this.actualConfig.toolbar;a=CKEDITOR.tools.isArray(a)?\"\\tconfig.toolbar \\x3d \"+(\"[\\n\\t\\t\"+g.map(a,function(a){return l.stringifyJSONintoOneLine(a,{addSpaces:!0,noQuotesOnKey:!0,singleQuotes:!0})}).join(\",\\n\\t\\t\")+\"\\n\\t]\")+\";\":\"config.toolbar \\x3d [];\";a=[\"CKEDITOR.editorConfig \\x3d function( config ) {\\n\",a,\"\\n};\"].join(\"\");var e=new CKEDITOR.dom.element(\"div\");e.addClass(\"codemirror-wrapper\");this.modifyContainer.append(e);this.codeContainer=CodeMirror(e.$,{mode:{name:\"javascript\",\njson:!0},lineNumbers:!1,lineWrapping:!0,viewportMargin:Infinity,value:a,smartIndent:!1,indentWithTabs:!0,indentUnit:4,tabSize:4,theme:\"neo\",extraKeys:{Left:b,Right:b,\"'''\":b,\"'\\\"'\":b,Backspace:b,Delete:b,\"Shift-Tab\":\"indentLess\"}});this.codeContainer.on(\"endCompletion\",function(a,b){var d=c(a);void 0!==b&&a.replaceSelection(d.endChar)});this.codeContainer.on(\"change\",function(){var a=k.codeContainer.getValue(),a=k._evaluateValue(a);null!==a?(k.actualConfig.toolbar=a.toolbar?a.toolbar:k.actualConfig.toolbar,\nk._fillHintByUnusedElements(),k._refreshEditor(),k.mainContainer.removeClass(\"invalid\")):k.mainContainer.addClass(\"invalid\")});this.hintContainer=new CKEDITOR.dom.element(\"div\");this.hintContainer.addClass(\"toolbarModifier-hints\");this._fillHintByUnusedElements();this.hintContainer.insertBefore(e)};e.prototype._fillHintByUnusedElements=function(){var a=this.getUnusedButtonsArray(this.actualConfig.toolbar,!0),a=this.groupButtonNamesByGroup(a),d=g.map(a,function(a){var b=g.map(a.buttons,function(a){return\"\\x3ccode\\x3e\"+\na+\"\\x3c/code\\x3e \"}).join(\"\");return[\"\\x3cdt\\x3e\\x3ccode\\x3e\",a.name,\"\\x3c/code\\x3e\\x3c/dt\\x3e\\x3cdd\\x3e\",b,\"\\x3c/dd\\x3e\"].join(\"\")}).join(\" \"),f='\\x3cdt class\\x3d\"list-header\"\\x3eToolbar group\\x3c/dt\\x3e\\x3cdd class\\x3d\"list-header\"\\x3eUnused items\\x3c/dd\\x3e';a.length||(f=\"\\x3cp\\x3eAll items are in use.\\x3c/p\\x3e\");this.codeContainer.refresh();this.hintContainer.setHtml(\"\\x3ch3\\x3eUnused toolbar items\\x3c/h3\\x3e\\x3cdl\\x3e\"+f+d+\"\\x3c/dl\\x3e\")};e.prototype.getToolbarGroupByButtonName=function(a){var d=\nthis.fullToolbarEditor.buttonNamesByGroup,f;for(f in d)for(var c=d[f],b=c.length;b--;)if(a===c[b])return f;return null};e.prototype.getUnusedButtonsArray=function(a,d,f){d=!0===d?!0:!1;var c=e.mapToolbarCfgToElementsList(a);a=Object.keys(this.fullToolbarEditor.editorInstance.ui.items);a=g.filter(a,function(a){var d=\"-\"===a;a=void 0===f||0===a.toLowerCase().indexOf(f.toLowerCase());return!d&&a});a=g.filter(a,function(a){return-1==CKEDITOR.tools.indexOf(c,a)});d&&a.sort();return a};e.prototype.groupButtonNamesByGroup=\nfunction(a){var d=[],f=JSON.parse(JSON.stringify(this.fullToolbarEditor.buttonNamesByGroup)),c;for(c in f){var b=f[c],b=g.filter(b,function(b){return-1!==CKEDITOR.tools.indexOf(a,b)});b.length&&d.push({name:c,buttons:b})}return d};e.mapToolbarCfgToElementsList=function(a){function d(a){return\"-\"!==a}for(var f=[],c=a.length,b=0;b<c;b+=1)a[b]&&\"string\"!==typeof a[b]&&(f=f.concat(g.filter(a[b].items,d)));return f};e.prototype._setupActualConfig=function(a){a=a||this.editorInstance.config;CKEDITOR.tools.isArray(a.toolbar)||\n(a.toolbarGroups||(a.toolbarGroups=this.fullToolbarEditor.getFullToolbarGroupsConfig(!0)),this._fixGroups(a),a.toolbar=this._mapToolbarGroupsToToolbar(a.toolbarGroups,this.actualConfig.removeButtons),this.actualConfig.toolbar=a.toolbar,this.actualConfig.removeButtons=\"\")};e.prototype._mapToolbarGroupsToToolbar=function(a,d){d=d||this.editorInstance.config.removedBtns;d=\"string\"==typeof d?d.split(\",\"):[];for(var f=a.length;f--;){var c=this._mapToolbarSubgroup(a[f],d);\"separator\"===a[f].type?a[f]=\"/\":\nCKEDITOR.tools.isArray(c)&&0===c.length?a.splice(f,1):a[f]=\"string\"==typeof c?c:{name:a[f].name,items:c}}return a};e.prototype._mapToolbarSubgroup=function(a,d){if(\"string\"==typeof a)return a;for(var f=a.groups?a.groups.length:0,c=[],b=0;b<f;b+=1){var e=a.groups[b],e=this.fullToolbarEditor.buttonsByGroup[\"string\"===typeof e?e:e.name]||[],e=this._mapButtonsToButtonsNames(e,d),g=e.length,c=c.concat(e);g&&c.push(\"-\")}\"-\"==c[c.length-1]&&c.pop();return c};e.prototype._mapButtonsToButtonsNames=function(a,\nd){for(var f=a.length;f--;){var c=a[f],c=\"string\"===typeof c?c:this.fullToolbarEditor.getCamelCasedButtonName(c.name);-1!==CKEDITOR.tools.indexOf(d,c)?a.splice(f,1):a[f]=c}return a};e.prototype._evaluateValue=function(a){var d;try{var f={};Function(\"var CKEDITOR \\x3d {}; \"+a+\"; return CKEDITOR;\")().editorConfig(f);d=f;for(var c=d.toolbar.length;c--;)d.toolbar[c]||d.toolbar.splice(c,1)}catch(b){d=null}return d};e.prototype.mapToolbarToToolbarGroups=function(a){function d(a,b){a=a.slice();for(var d=\nb.length;d--;){var c=a.indexOf(b[d]);-1!==c&&a.splice(c,1)}return a}for(var f={},c=[],b=[],c=a.length,e=0;e<c;e++)if(\"/\"===a[e])b.push(\"/\");else{var g=a[e].items,m={};m.name=a[e].name;m.groups=[];for(var l=g.length,p=0;p<l;p++){var n=g[p];if(\"-\"!==n){var h=this.getToolbarGroupByButtonName(n);-1===m.groups.indexOf(h)&&m.groups.push(h);f[h]=f[h]||{};h=f[h].buttons=f[h].buttons||{};h[n]=h[n]||{used:0,origin:m.name};h[n].used++}}b.push(m)}c=function(a,b){var c=[],e;for(e in a)var f=a[e],g=b[e].slice(),\nc=c.concat(d(g,Object.keys(f.buttons)));return c}(f,this.fullToolbarEditor.buttonNamesByGroup);return{toolbarGroups:b,removeButtons:c.join(\",\")}};return e})();"]}